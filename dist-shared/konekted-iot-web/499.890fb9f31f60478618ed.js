"use strict";(self.webpackChunkkonekted_iot_web=self.webpackChunkkonekted_iot_web||[]).push([[499],{7499:(yt,D,d)=>{d.r(D),d.d(D,{TicketsModule:()=>Ct});var l=d(8583),C=d(4330),s=d(665),u=d(4371),t=d(7716),U=d(5120),p=d(8239),S=d(5145),I=d(474);let c=(()=>{class a{constructor(e,n){this.http=e,this.api=n}getTickets(e){var n=this;return(0,p.Z)(function*(){return yield n.http.post(n.api.tickets.getTickets,e,!1)})()}getTicketThread(e){var n=this;return(0,p.Z)(function*(){return yield n.http.get(n.api.tickets.getTicketThread+`/${e}`,!1)})()}getTicketsUnfiltered(){var e=this;return(0,p.Z)(function*(){return yield e.http.get(e.api.tickets.tickets,!1)})()}newTicket(e){var n=this;return(0,p.Z)(function*(){return yield n.http.post(n.api.tickets.tickets,e,!0)})()}updateTicket(e,n){var o=this;return(0,p.Z)(function*(){return yield o.http.put(o.api.tickets.tickets,e,n,!0)})()}deleteTicket(e){var n=this;return(0,p.Z)(function*(){return yield n.http.delete(n.api.tickets.tickets,e,!0)})()}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(S.$),t.LFG(I.s))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var y=d(1721),v=d(1321),N=d(1329),m=d(4957);function J(a,i){if(1&a&&(t.TgZ(0,"p",14),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(null==e.description||null==e.description.errors?null:e.description.errors.message)}}function Y(a,i){if(1&a&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function Q(a,i){if(1&a&&(t.TgZ(0,"p",14),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(null==e.status||null==e.status.errors?null:e.status.errors.message)}}let F=(()=>{class a{constructor(e,n,o,A,q,w){this.modal=e,this.tickets=n,this.loader=o,this.fn=A,this.router=q,this.preferences=w,this.districts=[],this.regions=[],this.cities=[],this.statuses=[],this.selectors={status:"-- Select Status --"},this.form=new s.cw({description:new s.NI("",[u.b.required]),status:new s.NI({value:"Created",disabled:!0},[u.b.required,u.b.isNot(this.selectors.status)])}),this.onSubmit=()=>{var b,r;const k={description:null===(b=this.description)||void 0===b?void 0:b.value,status:null===(r=this.status)||void 0===r?void 0:r.value};this.tickets.newTicket(k).then(x=>{x.error||this.router.navigateByUrl("/tickets/my-tickets")})}}get description(){return this.form.get("description")}get status(){return this.form.get("status")}ngOnInit(){this.getStatuses()}getStatuses(){this.statuses=this.fn.getTicketStatuses()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(U.F),t.Y36(c),t.Y36(y.D),t.Y36(v.d),t.Y36(C.F0),t.Y36(N.y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-new-ticket"]],decls:22,vars:11,consts:[[1,"modal-header","bg-dark","text-white"],[1,"h6","modal-title"],[1,"modal-body","bg-white","rounded-lg"],["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["formControlName","description","type","text","id","floatingname","placeholder","Description",1,"form-control",2,"min-height","300px"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","status","type","text","id","floatingStatus","placeholder","Status",1,"form-control"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","floatingStatus"],[1,"w-100","btn","btn-lg","btn-primary",3,"type"],[1,"bi","bi-file-earmark-plus-fill"],[1,"text-danger","font-weight-bold","p-0","m-0"]],template:function(e,n){1&e&&(t._UZ(0,"app-top-bar"),t.TgZ(1,"div",0),t.TgZ(2,"h2",1),t._uU(3,"Create a ticket (for compain/problem/request)"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(6,"div",4),t._UZ(7,"textarea",5),t.TgZ(8,"label",6),t._uU(9,"Description"),t.qZA(),t.YNc(10,J,2,1,"p",7),t.qZA(),t.TgZ(11,"div",4),t.TgZ(12,"select",8),t.TgZ(13,"option",9),t._uU(14,"-- Select Status --"),t.qZA(),t.YNc(15,Y,2,2,"option",10),t.qZA(),t.TgZ(16,"label",11),t._uU(17,"Status"),t.qZA(),t.YNc(18,Q,2,1,"p",7),t.qZA(),t.TgZ(19,"button",12),t._UZ(20,"i",13),t._uU(21," Submit Ticket "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("formGroup",n.form),t.xp6(2),t.ekj("invalid",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),t.xp6(3),t.Q6J("ngIf",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),t.xp6(2),t.ekj("invalid",(null==n.status?null:n.status.touched)&&(null==n.status?null:n.status.invalid)),t.xp6(3),t.Q6J("ngForOf",n.statuses),t.xp6(3),t.Q6J("ngIf",(null==n.status?null:n.status.touched)&&(null==n.status?null:n.status.invalid)),t.xp6(1),t.ekj("disabled",n.form.invalid),t.Q6J("type",n.form.valid?"submit":"button"))},directives:[m.N,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,l.O5,s.EJ,s.YN,s.Kr,l.sg],styles:[""]}),a})();var O=d(3002),V=d(1183);let Z=(()=>{class a{constructor(e,n,o,A,q){this.modal=e,this.ticketService=n,this.loader=o,this.dataIn=A,this.boardState=q,this.form=new s.cw({ticketId:new s.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("ticketId",new s.NI(this.data.id)))}get ticketId(){return this.form.get("ticketId")}onSubmit(){var e;this.ticketService.deleteTicket(null===(e=this.ticketId)||void 0===e?void 0:e.value).then(n=>{n.error||(this.modal.close(),this.boardState.getActiveBoard(),this.loader.refresh())})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(U.F),t.Y36(c),t.Y36(y.D),t.Y36(O.i),t.Y36(V.C))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-delete-ticket"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1," Delete ticket? "),t._UZ(2,"br"),t.TgZ(3,"b"),t._uU(4,"Once this ticket has been processed, it can not be deleted again."),t.qZA(),t.qZA(),t.TgZ(5,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(6,"button",1),t._uU(7," Delete "),t._UZ(8,"i",2),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("formGroup",n.form),t.xp6(1),t.ekj("disabled",n.form.invalid),t.Q6J("type",n.form.valid?"submit":"button"))},directives:[s._Y,s.JL,s.sg],styles:[""]}),a})();function E(a,i){if(1&a&&(t.TgZ(0,"p",11),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(null==e.remark||null==e.remark.errors?null:e.remark.errors.message)}}function B(a,i){if(1&a&&(t.TgZ(0,"option",6),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function L(a,i){if(1&a&&(t.TgZ(0,"p",11),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(null==e.status||null==e.status.errors?null:e.status.errors.message)}}let T=(()=>{class a{constructor(e,n,o,A,q,w,b){this.modal=e,this.tickets=n,this.loader=o,this.fn=A,this.router=q,this.dataIn=w,this.preferences=b,this.statuses=[],this.selectors={status:"-- Select Status --"},this.form=new s.cw({remark:new s.NI("",[u.b.required]),status:new s.NI(this.selectors.status,[u.b.required,u.b.isNot(this.selectors.status)])}),this.onSubmit=()=>{var r,k;const x={remark:null===(r=this.remark)||void 0===r?void 0:r.value,status:null===(k=this.status)||void 0===k?void 0:k.value};this.tickets.updateTicket(this.data.id,x).then(Ut=>{Ut.error||(this.modal.close(),this.loader.refresh())})}}get remark(){return this.form.get("remark")}get status(){return this.form.get("status")}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.getStatuses())}getStatuses(){this.statuses="Closed"==this.data.status?this.fn.getTicketStatuses().filter(e=>"Escalated"==e):this.fn.getTicketStatuses().filter(e=>"Created"!=e&&"Escalated"!=e)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(U.F),t.Y36(c),t.Y36(y.D),t.Y36(v.d),t.Y36(C.F0),t.Y36(O.i),t.Y36(N.y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-update-ticket"]],decls:17,vars:11,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["formControlName","remark","type","text","id","floatingname","placeholder","Remark",1,"form-control",2,"min-height","300px"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","status","type","text","id","floatingStatus","placeholder","Status",1,"form-control"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","floatingStatus"],[1,"w-100","btn","btn-lg","btn-primary",3,"type"],[1,"bi","bi-file-earmark-plus-fill"],[1,"text-danger","font-weight-bold","p-0","m-0"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(1,"div",1),t._UZ(2,"textarea",2),t.TgZ(3,"label",3),t._uU(4,"Remark"),t.qZA(),t.YNc(5,E,2,1,"p",4),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"select",5),t.TgZ(8,"option",6),t._uU(9,"-- Select Status --"),t.qZA(),t.YNc(10,B,2,2,"option",7),t.qZA(),t.TgZ(11,"label",8),t._uU(12,"Status"),t.qZA(),t.YNc(13,L,2,1,"p",4),t.qZA(),t.TgZ(14,"button",9),t._UZ(15,"i",10),t._uU(16," Submit Ticket "),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(2),t.ekj("invalid",(null==n.remark?null:n.remark.touched)&&(null==n.remark?null:n.remark.invalid)),t.xp6(3),t.Q6J("ngIf",(null==n.remark?null:n.remark.touched)&&(null==n.remark?null:n.remark.invalid)),t.xp6(2),t.ekj("invalid",(null==n.status?null:n.status.touched)&&(null==n.status?null:n.status.invalid)),t.xp6(3),t.Q6J("ngForOf",n.statuses),t.xp6(3),t.Q6J("ngIf",(null==n.status?null:n.status.touched)&&(null==n.status?null:n.status.invalid)),t.xp6(1),t.ekj("disabled",n.form.invalid),t.Q6J("type",n.form.valid?"submit":"button"))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,l.O5,s.EJ,s.YN,s.Kr,l.sg],styles:[""]}),a})();function j(a,i){if(1&a&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA()),2&a){const e=i.$implicit;t.xp6(2),t.Oqu(e.action_by),t.xp6(2),t.Oqu(e.remark),t.xp6(2),t.Oqu(e.created_at)}}function M(a,i){if(1&a&&(t.TgZ(0,"div",1),t.TgZ(1,"table",2),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"Action by"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Remark"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Created Date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"tbody"),t.YNc(11,j,7,3,"tr",5),t.qZA(),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Q6J("ngForOf",e.threads)}}function z(a,i){1&a&&(t.TgZ(0,"div"),t._uU(1," No activities found.\n"),t.qZA())}let h=(()=>{class a{constructor(e,n,o){this.fn=e,this.dataIn=n,this.tickets=o}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.getThread(this.data.id))}getThread(e){this.tickets.getTicketThread(e).then(n=>{n.error||(this.threads=n.data)})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.d),t.Y36(O.i),t.Y36(c))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-view-ticket"]],decls:38,vars:8,consts:[[1,"bg-primary","w-25","text-white","rounded","p-2","my-4","text-center","m-auto"],[1,"table-responsive"],[1,"table","table-sm","table-bordered","table-hover"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.TgZ(0,"h4",0),t._uU(1,"Ticket Details"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"table",2),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6,"Ticket Number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"th"),t._uU(11,"Reported by"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th"),t._uU(16,"Description"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.qZA(),t.TgZ(19,"tr"),t.TgZ(20,"th"),t._uU(21,"Location"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"th"),t._uU(26,"Contact"),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"tr"),t.TgZ(30,"th"),t._uU(31,"Status"),t.qZA(),t.TgZ(32,"td"),t._uU(33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"h4",0),t._uU(35,"Ticket Activities"),t.qZA(),t.YNc(36,M,12,1,"div",3),t.YNc(37,z,2,0,"div",4)),2&e&&(t.xp6(8),t.Oqu(null==n.data?null:n.data.ticket_number),t.xp6(5),t.Oqu(null==n.data?null:n.data.reported_by),t.xp6(5),t.Oqu(null==n.data?null:n.data.description),t.xp6(5),t.Oqu(null==n.data?null:n.data.location),t.xp6(5),t.Oqu(null==n.data?null:n.data.contact),t.xp6(5),t.Oqu(null==n.data?null:n.data.status),t.xp6(3),t.Q6J("ngIf",n.threads),t.xp6(1),t.Q6J("ngIf",!n.threads))},directives:[l.O5,l.sg],styles:[""]}),a})();var _=d(5321),g=d(3771),f=d(1244);function G(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Superadmin can't be modified for security reasons) "),t.qZA())}function R(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Backup admin can't be deleted) "),t.qZA())}function X(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"slice"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"slice"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._UZ(19,"app-action-buttons",9),t.YNc(20,G,2,0,"small",10),t.YNc(21,R,2,0,"small",10),t.qZA(),t.qZA(),t.BQk()),2&a){const e=i.$implicit,n=t.oxw(2);t.xp6(3),t.Oqu(e.ticket_number),t.xp6(2),t.Oqu(e.reported_by),t.xp6(2),t.Oqu(t.Dn7(8,19,e.description,0,30)+(e.description.length>=30?"...":"")),t.xp6(3),t.Oqu(t.Dn7(11,23,e.location,0,30)+(e.location.length>=30?"...":"")),t.xp6(3),t.Oqu(e.status),t.xp6(2),t.Oqu(e.contact),t.xp6(2),t.Oqu(e.created_at),t.xp6(2),t.Q6J("headingDelete","Delete Ticket")("headingEdit","Update Ticket")("headingView","View Ticket")("modalEditContent",n.modalEditComponent)("editAction",!0)("deleteAction","Created"==e.status)("modalViewContent",n.modalViewComponent)("modalViewSize","lg")("modalDeleteContent",n.modalDeleteComponent)("data",e),t.xp6(1),t.Q6J("ngIf","admin@nafuutronics.com"==e.email),t.xp6(1),t.Q6J("ngIf","admin@nafuuhrm.com"==e.email)}}function $(a,i){if(1&a&&(t.TgZ(0,"tbody"),t.YNc(1,X,22,27,"ng-container",8),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data)}}function K(a,i){1&a&&(t.TgZ(0,"tbody"),t.TgZ(1,"tr"),t.TgZ(2,"th",12),t._uU(3,"No data found."),t.qZA(),t.qZA(),t.qZA())}function H(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Superadmin can't be modified for security reasons) "),t.qZA())}function W(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Backup admin can't be deleted) "),t.qZA())}function tt(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"slice"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"slice"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._UZ(19,"app-action-buttons",9),t.YNc(20,H,2,0,"small",10),t.YNc(21,W,2,0,"small",10),t.qZA(),t.qZA(),t.BQk()),2&a){const e=i.$implicit,n=t.oxw(2);t.xp6(3),t.Oqu(e.ticket_number),t.xp6(2),t.Oqu(e.reported_by),t.xp6(2),t.Oqu(t.Dn7(8,19,e.description,0,30)+(e.description.length>=30?"...":"")),t.xp6(3),t.Oqu(t.Dn7(11,23,e.location,0,30)+(e.location.length>=30?"...":"")),t.xp6(3),t.Oqu(e.status),t.xp6(2),t.Oqu(e.contact),t.xp6(2),t.Oqu(e.created_at),t.xp6(2),t.Q6J("headingDelete","Delete Ticket")("headingEdit","Update Ticket")("headingView","View Ticket")("modalEditContent",n.modalEditComponent)("editAction","Closed"==e.status)("deleteAction","Created"==e.status)("modalViewContent",n.modalViewComponent)("modalViewSize","lg")("modalDeleteContent",n.modalDeleteComponent)("data",e),t.xp6(1),t.Q6J("ngIf","admin@nafuutronics.com"==e.email),t.xp6(1),t.Q6J("ngIf","admin@nafuuhrm.com"==e.email)}}function et(a,i){if(1&a&&(t.TgZ(0,"tbody"),t.YNc(1,tt,22,27,"ng-container",8),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data)}}function nt(a,i){1&a&&(t.TgZ(0,"tbody"),t.TgZ(1,"tr"),t.TgZ(2,"th",12),t._uU(3,"No data found."),t.qZA(),t.qZA(),t.qZA())}function it(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Superadmin can't be modified for security reasons) "),t.qZA())}function ot(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Backup admin can't be deleted) "),t.qZA())}function st(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"slice"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"slice"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._UZ(19,"app-action-buttons",9),t.YNc(20,it,2,0,"small",10),t.YNc(21,ot,2,0,"small",10),t.qZA(),t.qZA(),t.BQk()),2&a){const e=i.$implicit,n=t.oxw(2);t.xp6(3),t.Oqu(e.ticket_number),t.xp6(2),t.Oqu(e.reported_by),t.xp6(2),t.Oqu(t.Dn7(8,19,e.description,0,30)+(e.description.length>=30?"...":"")),t.xp6(3),t.Oqu(t.Dn7(11,23,e.location,0,30)+(e.location.length>=30?"...":"")),t.xp6(3),t.Oqu(e.status),t.xp6(2),t.Oqu(e.contact),t.xp6(2),t.Oqu(e.created_at),t.xp6(2),t.Q6J("headingDelete","Delete Ticket")("headingEdit","Update Ticket")("headingView","View Ticket")("modalEditContent",n.modalEditComponent)("editAction",!0)("deleteAction","Created"==e.status)("modalViewContent",n.modalViewComponent)("modalViewSize","lg")("modalDeleteContent",n.modalDeleteComponent)("data",e),t.xp6(1),t.Q6J("ngIf","admin@nafuutronics.com"==e.email),t.xp6(1),t.Q6J("ngIf","admin@nafuuhrm.com"==e.email)}}function lt(a,i){if(1&a&&(t.TgZ(0,"tbody"),t.YNc(1,st,22,27,"ng-container",8),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data)}}function dt(a,i){1&a&&(t.TgZ(0,"tbody"),t.TgZ(1,"tr"),t.TgZ(2,"th",12),t._uU(3,"No data found."),t.qZA(),t.qZA(),t.qZA())}function rt(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Superadmin can't be modified for security reasons) "),t.qZA())}function ut(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Backup admin can't be deleted) "),t.qZA())}function pt(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"slice"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"slice"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._UZ(19,"app-action-buttons",9),t.YNc(20,rt,2,0,"small",10),t.YNc(21,ut,2,0,"small",10),t.qZA(),t.qZA(),t.BQk()),2&a){const e=i.$implicit,n=t.oxw(2);t.xp6(3),t.Oqu(e.ticket_number),t.xp6(2),t.Oqu(e.reported_by),t.xp6(2),t.Oqu(t.Dn7(8,19,e.description,0,30)+(e.description.length>=30?"...":"")),t.xp6(3),t.Oqu(t.Dn7(11,23,e.location,0,30)+(e.location.length>=30?"...":"")),t.xp6(3),t.Oqu(e.status),t.xp6(2),t.Oqu(e.contact),t.xp6(2),t.Oqu(e.created_at),t.xp6(2),t.Q6J("headingDelete","Delete Ticket")("headingEdit","Update Ticket")("headingView","View Ticket")("modalEditContent",n.modalEditComponent)("editAction",!1)("deleteAction","Created"==e.status)("modalViewContent",n.modalViewComponent)("modalViewSize","lg")("modalDeleteContent",n.modalDeleteComponent)("data",e),t.xp6(1),t.Q6J("ngIf","admin@nafuutronics.com"==e.email),t.xp6(1),t.Q6J("ngIf","admin@nafuuhrm.com"==e.email)}}function mt(a,i){if(1&a&&(t.TgZ(0,"tbody"),t.YNc(1,pt,22,27,"ng-container",8),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data)}}function gt(a,i){1&a&&(t.TgZ(0,"tbody"),t.TgZ(1,"tr"),t.TgZ(2,"th",12),t._uU(3,"No data found."),t.qZA(),t.qZA(),t.qZA())}function Tt(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Superadmin can't be modified for security reasons) "),t.qZA())}function ht(a,i){1&a&&(t.TgZ(0,"small",11),t._uU(1," (Backup admin can't be deleted) "),t.qZA())}function _t(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"slice"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"slice"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._UZ(19,"app-action-buttons",9),t.YNc(20,Tt,2,0,"small",10),t.YNc(21,ht,2,0,"small",10),t.qZA(),t.qZA(),t.BQk()),2&a){const e=i.$implicit,n=t.oxw(2);t.xp6(3),t.Oqu(e.ticket_number),t.xp6(2),t.Oqu(e.reported_by),t.xp6(2),t.Oqu(t.Dn7(8,19,e.description,0,30)+(e.description.length>=30?"...":"")),t.xp6(3),t.Oqu(t.Dn7(11,23,e.location,0,30)+(e.location.length>=30?"...":"")),t.xp6(3),t.Oqu(e.status),t.xp6(2),t.Oqu(e.contact),t.xp6(2),t.Oqu(e.created_at),t.xp6(2),t.Q6J("headingDelete","Delete Ticket")("headingEdit","Update Ticket")("headingView","View Ticket")("modalEditContent",n.modalEditComponent)("editAction",!0)("deleteAction","Created"==e.status)("modalViewContent",n.modalViewComponent)("modalViewSize","lg")("modalDeleteContent",n.modalDeleteComponent)("data",e),t.xp6(1),t.Q6J("ngIf","admin@nafuutronics.com"==e.email),t.xp6(1),t.Q6J("ngIf","admin@nafuuhrm.com"==e.email)}}function ft(a,i){if(1&a&&(t.TgZ(0,"tbody"),t.YNc(1,_t,22,27,"ng-container",8),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data)}}function At(a,i){1&a&&(t.TgZ(0,"tbody"),t.TgZ(1,"tr"),t.TgZ(2,"th",12),t._uU(3,"No data found."),t.qZA(),t.qZA(),t.qZA())}const qt=[{path:"new-ticket",component:F},{path:"all-tickets",component:(()=>{class a{constructor(e,n){this.tickets=e,this.auth=n,this.dtOptions={},this.data=[],this.cols=["id","ticket_number","reported_by","location","status","contact","description"],this.modalViewComponent=h,this.modalEditComponent=T,this.modalDeleteComponent=Z}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(e,n)=>{this.tickets.getTickets(e).then(o=>{this.data=o.data,n({recordsTotal:o.recordsTotal,recordsFiltered:o.recordsFiltered,data:[]})})},columns:[{data:"ticket_number"},{data:"reported_by"},{data:"description",width:"200px"},{data:"location"},{data:"status"},{data:"contact"},{data:"created_at"},{data:"",orderable:!1}],responsive:!0}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c),t.Y36(_.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-all-tickets"]],decls:26,vars:4,consts:[[3,"newButton"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","editAction","deleteAction","modalViewContent","modalViewSize","modalDeleteContent","data"],["class","font-weight-750 text-italic",4,"ngIf"],[1,"font-weight-750","text-italic"],["colspan","3"]],template:function(e,n){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2,3),t.TgZ(4,"div",4),t.TgZ(5,"table",5),t.TgZ(6,"thead",6),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9,"Ticket Number"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Reported By"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Description"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Location"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Status"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Contact"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Created Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Actions"),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,$,2,1,"tbody",7),t.YNc(25,K,4,0,"tbody",7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("newButton",!1),t.xp6(5),t.Q6J("dtOptions",n.dtOptions),t.xp6(19),t.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),t.xp6(1),t.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[m.N,g.G,l.O5,l.sg,f.O],pipes:[l.OU],styles:[""]}),a})()},{path:"my-tickets",component:(()=>{class a{constructor(e,n){this.tickets=e,this.auth=n,this.dtOptions={},this.data=[],this.cols=["id","ticket_number","reported_by","location","status","contact","description","created_at"],this.modalViewComponent=h,this.modalEditComponent=T,this.modalDeleteComponent=Z}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(e,n)=>{this.tickets.getTickets(Object.assign({userId:this.auth.getAuth().user_id},e)).then(o=>{this.data=o.data,n({recordsTotal:o.recordsTotal,recordsFiltered:o.recordsFiltered,data:[]})})},columns:[{data:"ticket_number"},{data:"reported_by"},{data:"description",width:"200px"},{data:"location"},{data:"status"},{data:"contact"},{data:"created_at"},{data:"",orderable:!1}],responsive:!0}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c),t.Y36(_.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-my-tickets"]],decls:26,vars:4,consts:[[3,"newButton"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","editAction","deleteAction","modalViewContent","modalViewSize","modalDeleteContent","data"],["class","font-weight-750 text-italic",4,"ngIf"],[1,"font-weight-750","text-italic"],["colspan","3"]],template:function(e,n){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2,3),t.TgZ(4,"div",4),t.TgZ(5,"table",5),t.TgZ(6,"thead",6),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9,"Ticket Number"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Reported By"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Description"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Location"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Status"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Contact"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Created Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Actions"),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,et,2,1,"tbody",7),t.YNc(25,nt,4,0,"tbody",7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("newButton",!1),t.xp6(5),t.Q6J("dtOptions",n.dtOptions),t.xp6(19),t.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),t.xp6(1),t.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[m.N,g.G,l.O5,l.sg,f.O],pipes:[l.OU],styles:[""]}),a})()},{path:"open-tickets",component:(()=>{class a{constructor(e,n){this.tickets=e,this.auth=n,this.dtOptions={},this.data=[],this.cols=["id","ticket_number","reported_by","location","status","contact","description"],this.modalViewComponent=h,this.modalEditComponent=T,this.modalDeleteComponent=Z}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(e,n)=>{this.tickets.getTickets(Object.assign({status:"Created,Processed"},e)).then(o=>{this.data=o.data,n({recordsTotal:o.recordsTotal,recordsFiltered:o.recordsFiltered,data:[]})})},columns:[{data:"ticket_number"},{data:"reported_by"},{data:"description",width:"200px"},{data:"location"},{data:"status"},{data:"contact"},{data:"created_at"},{data:"",orderable:!1}],responsive:!0}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c),t.Y36(_.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-open-tickets"]],decls:26,vars:4,consts:[[3,"newButton"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","editAction","deleteAction","modalViewContent","modalViewSize","modalDeleteContent","data"],["class","font-weight-750 text-italic",4,"ngIf"],[1,"font-weight-750","text-italic"],["colspan","3"]],template:function(e,n){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2,3),t.TgZ(4,"div",4),t.TgZ(5,"table",5),t.TgZ(6,"thead",6),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9,"Ticket Number"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Reported By"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Description"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Location"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Status"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Contact"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Created Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Actions"),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,lt,2,1,"tbody",7),t.YNc(25,dt,4,0,"tbody",7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("newButton",!1),t.xp6(5),t.Q6J("dtOptions",n.dtOptions),t.xp6(19),t.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),t.xp6(1),t.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[m.N,g.G,l.O5,l.sg,f.O],pipes:[l.OU],styles:[""]}),a})()},{path:"closed-tickets",component:(()=>{class a{constructor(e,n){this.tickets=e,this.auth=n,this.dtOptions={},this.data=[],this.cols=["id","ticket_number","reported_by","location","status","contact","description"],this.modalViewComponent=h,this.modalEditComponent=T,this.modalDeleteComponent=Z}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(e,n)=>{this.tickets.getTickets(Object.assign({status:"Closed"},e)).then(o=>{this.data=o.data,n({recordsTotal:o.recordsTotal,recordsFiltered:o.recordsFiltered,data:[]})})},columns:[{data:"ticket_number"},{data:"reported_by"},{data:"description",width:"200px"},{data:"location"},{data:"status"},{data:"contact"},{data:"created_at"},{data:"",orderable:!1}],responsive:!0}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c),t.Y36(_.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-closed-tickets"]],decls:26,vars:4,consts:[[3,"newButton"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","editAction","deleteAction","modalViewContent","modalViewSize","modalDeleteContent","data"],["class","font-weight-750 text-italic",4,"ngIf"],[1,"font-weight-750","text-italic"],["colspan","3"]],template:function(e,n){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2,3),t.TgZ(4,"div",4),t.TgZ(5,"table",5),t.TgZ(6,"thead",6),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9,"Ticket Number"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Reported By"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Description"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Location"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Status"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Contact"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Created Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Actions"),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,mt,2,1,"tbody",7),t.YNc(25,gt,4,0,"tbody",7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("newButton",!1),t.xp6(5),t.Q6J("dtOptions",n.dtOptions),t.xp6(19),t.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),t.xp6(1),t.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[m.N,g.G,l.O5,l.sg,f.O],pipes:[l.OU],styles:[""]}),a})()},{path:"escalated-tickets",component:(()=>{class a{constructor(e,n){this.tickets=e,this.auth=n,this.dtOptions={},this.data=[],this.cols=["id","ticket_number","reported_by","location","status","contact","description"],this.modalViewComponent=h,this.modalEditComponent=T,this.modalDeleteComponent=Z}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(e,n)=>{this.tickets.getTickets(Object.assign({status:"Escalated"},e)).then(o=>{this.data=o.data,n({recordsTotal:o.recordsTotal,recordsFiltered:o.recordsFiltered,data:[]})})},columns:[{data:"ticket_number"},{data:"reported_by"},{data:"description",width:"200px"},{data:"location"},{data:"status"},{data:"contact"},{data:"created_at"},{data:"",orderable:!1}],responsive:!0}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c),t.Y36(_.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-escalated-tickets"]],decls:26,vars:4,consts:[[3,"newButton"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","editAction","deleteAction","modalViewContent","modalViewSize","modalDeleteContent","data"],["class","font-weight-750 text-italic",4,"ngIf"],[1,"font-weight-750","text-italic"],["colspan","3"]],template:function(e,n){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2,3),t.TgZ(4,"div",4),t.TgZ(5,"table",5),t.TgZ(6,"thead",6),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9,"Ticket Number"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Reported By"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Description"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Location"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Status"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Contact"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Created Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Actions"),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,ft,2,1,"tbody",7),t.YNc(25,At,4,0,"tbody",7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("newButton",!1),t.xp6(5),t.Q6J("dtOptions",n.dtOptions),t.xp6(19),t.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),t.xp6(1),t.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[m.N,g.G,l.O5,l.sg,f.O],pipes:[l.OU],styles:[""]}),a})()}];let bt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[C.Bz.forChild(qt)],C.Bz]}),a})();var kt=d(6631);let Ct=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[l.ez,bt,g.T,kt.E,s.u5,s.UX]]}),a})()}}]);