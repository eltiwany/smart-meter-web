"use strict";(self.webpackChunkkonekted_iot_web=self.webpackChunkkonekted_iot_web||[]).push([[582],{8582:(se,q,s)=>{s.r(q),s.d(q,{LinkHardwaresModule:()=>re});var J=s(3771),Y=s(6631),D=s(5730),c=s(8583),m=s(4371),l=s(665),t=s(7716),v=s(3002),h=s(7896),f=s(5120),x=s(1721);function y(n,i){if(1&n&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.name||null==e.name.errors?null:e.name.errors.message)}}function Q(n,i){if(1&n&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.interval||null==e.interval.errors?null:e.interval.errors.message)}}function M(n,i){if(1&n&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.threshold||null==e.threshold.errors?null:e.threshold.errors.message)}}function L(n,i){if(1&n&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.threshold_percentage||null==e.threshold_percentage.errors?null:e.threshold_percentage.errors.message)}}let B=(()=>{class n{constructor(e,o,a,r){this.dataIn=e,this.sensorsService=o,this.modal=a,this.loader=r,this.form=new l.cw({id:new l.NI(""),name:new l.NI(""),interval:new l.NI(""),threshold:new l.NI(""),threshold_percentage:new l.NI("")}),this.onSubmit=()=>{var d,b,w,p,u,_,T;const k={id:null===(d=this.id)||void 0===d?void 0:d.value,name:null===(b=this.name)||void 0===b?void 0:b.value,interval:null===(w=this.interval)||void 0===w?void 0:w.value,threshold:null===(p=this.threshold)||void 0===p?void 0:p.value,threshold_percentage:null===(u=this.threshold_percentage)||void 0===u?void 0:u.value};this.sensorsService.updateUserSensor(null===(T=null===(_=this.data)||void 0===_?void 0:_.sensor)||void 0===T?void 0:T.id,k).then(le=>{le.error||(this.modal.close(),this.loader.refresh())})}}get id(){return this.form.get("id")}get name(){return this.form.get("name")}get interval(){return this.form.get("interval")}get threshold(){return this.form.get("threshold")}get threshold_percentage(){return this.form.get("threshold_percentage")}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("id",new l.NI(this.data.sensor.id,[m.b.required])),this.form.setControl("name",new l.NI(this.data.sensor.user_defined_name,[m.b.required])),this.form.setControl("interval",new l.NI(this.data.sensor.interval,[m.b.required])),this.form.setControl("threshold",new l.NI(this.data.sensor.threshold,[m.b.required])),this.form.setControl("threshold_percentage",new l.NI(this.data.sensor.threshold_percentage,[m.b.required,m.b.isPercentage])),console.log(this.form))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.i),t.Y36(h.n),t.Y36(f.F),t.Y36(x.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-sensors"]],decls:24,vars:16,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["formControlName","name","type","text","id","floatingName","placeholder","Name",1,"form-control"],["for","floatingName"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","interval","type","number","id","floatingInterval","placeholder","Interval",1,"form-control"],["for","floatingInterval"],["formControlName","threshold","type","number","id","floatingThreshold","placeholder","Threshold",1,"form-control"],["for","floatingThreshold"],["formControlName","threshold_percentage","type","number","id","floatingThreshold_percentage","placeholder","Threshold Percentage",1,"form-control"],["for","floatingThreshold_percentage"],[1,"w-100","btn","btn-lg","btn-success",3,"type"],[1,"bi","bi-check-circle-fill"],[1,"text-danger","font-weight-bold","p-0","m-0"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(1,"div",1),t._UZ(2,"input",2),t.TgZ(3,"label",3),t._uU(4,"Name"),t.qZA(),t.YNc(5,y,2,1,"p",4),t.qZA(),t.TgZ(6,"div",1),t._UZ(7,"input",5),t.TgZ(8,"label",6),t._uU(9,"Interval"),t.qZA(),t.YNc(10,Q,2,1,"p",4),t.qZA(),t.TgZ(11,"div",1),t._UZ(12,"input",7),t.TgZ(13,"label",8),t._uU(14,"Threshold"),t.qZA(),t.YNc(15,M,2,1,"p",4),t.qZA(),t.TgZ(16,"div",1),t._UZ(17,"input",9),t.TgZ(18,"label",10),t._uU(19,"Threshold Percentage"),t.qZA(),t.YNc(20,L,2,1,"p",4),t.qZA(),t.TgZ(21,"button",11),t._uU(22," Update "),t._UZ(23,"i",12),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(2),t.ekj("invalid",(null==o.name?null:o.name.touched)&&(null==o.name?null:o.name.invalid)),t.xp6(3),t.Q6J("ngIf",(null==o.name?null:o.name.touched)&&(null==o.name?null:o.name.invalid)),t.xp6(2),t.ekj("invalid",(null==o.interval?null:o.interval.touched)&&(null==o.interval?null:o.interval.invalid)),t.xp6(3),t.Q6J("ngIf",(null==o.interval?null:o.interval.touched)&&(null==o.interval?null:o.interval.invalid)),t.xp6(2),t.ekj("invalid",(null==o.threshold?null:o.threshold.touched)&&(null==o.threshold?null:o.threshold.invalid)),t.xp6(3),t.Q6J("ngIf",(null==o.threshold?null:o.threshold.touched)&&(null==o.threshold?null:o.threshold.invalid)),t.xp6(2),t.ekj("invalid",(null==o.threshold_percentage?null:o.threshold_percentage.touched)&&(null==o.threshold_percentage?null:o.threshold_percentage.invalid)),t.xp6(3),t.Q6J("ngIf",(null==o.threshold_percentage?null:o.threshold_percentage.touched)&&(null==o.threshold_percentage?null:o.threshold_percentage.invalid)),t.xp6(1),t.ekj("disabled",o.form.invalid),t.Q6J("type",o.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,c.O5,l.wV],styles:[""]}),n})();var I=s(4249);let O=(()=>{class n{constructor(e,o,a,r){this.modal=e,this.sensorService=o,this.loader=a,this.dataIn=r,this.form=new l.cw({sensorId:new l.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("sensorId",new l.NI(this.data.sensor.id)))}get sensorId(){return this.form.get("sensorId")}onSubmit(){var e;this.sensorService.deleteUserSensor(null===(e=this.sensorId)||void 0===e?void 0:e.value).then(o=>{o.error||(this.modal.close(),this.loader.refresh())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.F),t.Y36(h.n),t.Y36(x.D),t.Y36(v.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-sensors"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1," Unlink this sensor?"),t._UZ(2,"br"),t._UZ(3,"br"),t._uU(4," Your physical device will no longer be able to communicate with the system.\n"),t.qZA(),t.TgZ(5,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(6,"button",1),t._uU(7," Delete "),t._UZ(8,"i",2),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(1),t.ekj("disabled",o.form.invalid),t.Q6J("type",o.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg],styles:[""]}),n})();var g=s(14),C=s(474),Z=s(1321),A=s(4957);function F(n,i){1&n&&(t.TgZ(0,"span",29),t._uU(1,"AL"),t.qZA())}function P(n,i){if(1&n&&t._UZ(0,"i"),2&n){const e=t.oxw();t.Gre("bi bi-",e.iconName," card-icon2 p-3")}}function H(n,i){if(1&n&&t._UZ(0,"img",30),2&n){const e=t.oxw();t.Q6J("src",e.imageUrl,t.LSH)}}function E(n,i){if(1&n&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.column," ")}}function z(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Expected data"),t.qZA(),t.TgZ(3,"td"),t.YNc(4,E,2,1,"span",33),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.columns)}}function j(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Interval"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(e.interval+" secs")}}function G(n,i){if(1&n&&(t.TgZ(0,"div",1),t.TgZ(1,"table",31),t.YNc(2,z,5,1,"tr",32),t.YNc(3,j,5,1,"tr",32),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",0!=e.columns.length),t.xp6(1),t.Q6J("ngIf",e.interval)}}function $(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=t.MAs(32);return a.modalService.open(r,a.modalSize)}),t._uU(1," View Device "),t.qZA()}if(2&n){const e=t.oxw();t.Gre("btn btn-link text-",e.color,"")}}function V(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=t.MAs(34);return a.modalService.open(r,a.modalDeleteSize)}),t._UZ(1,"i",37),t.qZA()}}function X(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=t.MAs(36);return a.modalService.open(r,a.modalEditSize)}),t._UZ(1,"i",39),t.qZA()}}function W(n,i){1&n&&t.GkF(0)}function R(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",40),t.TgZ(1,"h2",41),t._uU(2),t.qZA(),t.TgZ(3,"button",42),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t.qZA(),t.qZA(),t.TgZ(4,"div",43),t.YNc(5,W,1,0,"ng-container",44),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.heading),t.xp6(3),t.Q6J("ngComponentOutlet",e.modalContent)("ngComponentOutletInjector",e.dataInjected)}}function K(n,i){1&n&&t.GkF(0)}function tt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"h2",41),t._uU(2),t.qZA(),t.TgZ(3,"button",46),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t._UZ(4,"i",47),t.qZA(),t.qZA(),t.TgZ(5,"div",43),t.YNc(6,K,1,0,"ng-container",44),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.headingDelete),t.xp6(4),t.Q6J("ngComponentOutlet",e.modalDeleteContent)("ngComponentOutletInjector",e.dataInjected)}}function et(n,i){1&n&&t.GkF(0)}function nt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",40),t.TgZ(1,"h2",41),t._uU(2),t.qZA(),t.TgZ(3,"button",46),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t._UZ(4,"i",47),t.qZA(),t.qZA(),t.TgZ(5,"div",43),t.YNc(6,et,1,0,"ng-container",44),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("Edit ",e.deviceName,""),t.xp6(4),t.Q6J("ngComponentOutlet",e.modalEditContent)("ngComponentOutletInjector",e.dataInjected)}}let ot=(()=>{class n{constructor(e,o,a,r){this.config=e,this.modalService=o,this.sensorsService=a,this.injector=r,this.checked=[],this.imageUrl=this.config.preferences.imageSelector,this.iconName="plus-circle-fill",this.color="tertiary",this.isImage=!1,this.deviceName="Device Name",this.deviceId=0,this.isSwitchedOn=!1,this.isActiveLow=!1,this.dataInjected={},this.heading="View Device",this.headingDelete="Delete Device",this.showStatus=!0,this.textButton=!1,this.link=!0,this.linkMessage='Click the "plus" icon to link a device.',this.token="",this.interval="",this.connections=[],this.columns=[],this.modalSize="md",this.deleteAction=!1,this.modalDeleteSize="md",this.editAction=!1,this.modalEditSize="md",this.data=[]}onChecked(e,o,a=!1){a&&(e.target.checked=!e.target.checked),this.checked[o]=this.isSwitchedOn=this.isActiveLow?!e.target.checked:e.target.checked;let r={userSensorId:o,isSwitchedOn:this.isActiveLow?!e.target.checked:e.target.checked};console.log(e.target.value,this.isSwitchedOn,this.isActiveLow,!this.isSwitchedOn&&this.isActiveLow),this.sensorsService.switchActuator(r).then(d=>{d.error&&(this.checked[o]=!this.checked[o],e.target.checked=!e.target.checked)})}ngOnInit(){this.dataInjected=this.createInjector(this.data)}createInjector(e){return t.zs3.create([{provide:v.i,useValue:e}],this.injector)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g._),t.Y36(f.F),t.Y36(h.n),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-control-smart-device-card"]],inputs:{imageUrl:"imageUrl",iconName:"iconName",color:"color",isImage:"isImage",deviceName:"deviceName",deviceId:"deviceId",isSwitchedOn:"isSwitchedOn",isActiveLow:"isActiveLow",heading:"heading",headingDelete:"headingDelete",showStatus:"showStatus",textButton:"textButton",link:"link",linkMessage:"linkMessage",token:"token",interval:"interval",connections:"connections",columns:"columns",modalContent:"modalContent",modalSize:"modalSize",deleteAction:"deleteAction",modalDeleteContent:"modalDeleteContent",modalDeleteSize:"modalDeleteSize",editAction:"editAction",modalEditContent:"modalEditContent",modalEditSize:"modalEditSize",data:"data"},decls:37,vars:17,consts:[[1,"switch-body","row","mb-3","p-2"],[1,"col-12"],[1,"card","border-0","shadow"],[1,"card-body","d-flex","justify-content-around"],[1,"row"],[1,"col-12","text-center","align-items-center","justify-content-center"],[3,"for"],["class","badge bg-warning active-low",4,"ngIf"],[3,"class",4,"ngIf"],["height","185px","class","p-3",3,"src",4,"ngIf"],[1,"bg-white","p-2","mb-2","rounded","w-100"],["class","col-12",4,"ngIf"],[1,"col-12","m-0","p-0"],[1,"row","m-0","p-0","mt-2"],[1,"col","col-md-8"],["placement","bottom","ngbTooltip","Edit",3,"class","click",4,"ngIf"],[1,"col","col-md-4"],["class","btn btn-link text-danger float-right","placement","bottom","ngbTooltip","Delete",3,"click",4,"ngIf"],["class","btn btn-link text-primary float-right","style","margin-right: 10px","placement","bottom","ngbTooltip","Edit",3,"click",4,"ngIf"],[1,"fw-extrabold","text-center",2,"margin","10px 0px 10px 0px !important"],[1,"toggle-div"],["type","checkbox","role","switch","name","toggle","value","on",1,"toggle",2,"margin-right","5px",3,"id","defaultChecked","change"],[1,"slot",3,"for"],[1,"slot__label"],[1,"curtain"],["class","p-0"],["modal",""],["modalDelete",""],["modalEdit",""],[1,"badge","bg-warning","active-low"],["height","185px",1,"p-3",3,"src"],[1,"small","table","table-bordered","table-sm"],[4,"ngIf"],["class","mx-1",4,"ngFor","ngForOf"],[1,"mx-1"],["placement","bottom","ngbTooltip","Edit",3,"click"],["placement","bottom","ngbTooltip","Delete",1,"btn","btn-link","text-danger","float-right",3,"click"],[1,"bi","bi-trash"],["placement","bottom","ngbTooltip","Edit",1,"btn","btn-link","text-primary","float-right",2,"margin-right","10px",3,"click"],[1,"bi","bi-pencil"],[1,"modal-header","bg-dark","text-white"],[1,"h6","modal-title"],["type","button",1,"btn-close","bg-white",3,"click"],[1,"modal-body"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[1,"modal-header","bg-danger","text-white"],["type","button",1,"btn","btn-link","border-0","text-white",3,"click"],[1,"bi","bi-x-lg"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"label",6),t.YNc(7,F,2,0,"span",7),t.TgZ(8,"div"),t.YNc(9,P,1,3,"i",8),t.YNc(10,H,1,1,"img",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div"),t.TgZ(12,"div",10),t.YNc(13,G,4,2,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"div",13),t.TgZ(16,"div",14),t.YNc(17,$,2,3,"button",15),t.qZA(),t.TgZ(18,"div",16),t.YNc(19,V,2,0,"button",17),t.YNc(20,X,2,0,"button",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"h1",19),t._uU(22),t.qZA(),t.TgZ(23,"div",20),t.TgZ(24,"input",21),t.NdJ("change",function(r){return o.onChecked(r,o.deviceId)}),t.qZA(),t.TgZ(25,"label",22),t.TgZ(26,"span",23),t._uU(27,"OFF"),t.qZA(),t.TgZ(28,"span",23),t._uU(29,"ON"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(30,"div",24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(31,R,6,3,"ng-template",25,26,t.W1O),t.YNc(33,tt,7,3,"ng-template",25,27,t.W1O),t.YNc(35,nt,7,3,"ng-template",25,28,t.W1O)),2&e&&(t.xp6(6),t.Gre("pointer icon-shape icon-shape-",o.isSwitchedOn&&!o.isActiveLow||!o.isSwitchedOn&&o.isActiveLow?"success":"primary"," rounded rounded-bottom-0"),t.Q6J("for","toggle"+o.deviceId),t.xp6(1),t.Q6J("ngIf",o.isActiveLow),t.xp6(2),t.Q6J("ngIf",!o.isImage),t.xp6(1),t.Q6J("ngIf",o.isImage),t.xp6(1),t.Tol((o.isSwitchedOn&&!o.isActiveLow||!o.isSwitchedOn&&o.isActiveLow?"bg-green":"bg-gray")+" switch rounded rounded-top-0 p-3"),t.xp6(2),t.Q6J("ngIf",!o.link),t.xp6(4),t.Q6J("ngIf",o.textButton),t.xp6(2),t.Q6J("ngIf",o.deleteAction),t.xp6(1),t.Q6J("ngIf",o.editAction),t.xp6(2),t.Oqu(o.deviceName),t.xp6(2),t.Q6J("id","toggle"+o.deviceId)("defaultChecked",o.isSwitchedOn&&!o.isActiveLow||!o.isSwitchedOn&&o.isActiveLow),t.xp6(1),t.Q6J("for","toggle"+o.deviceId))},directives:[c.O5,c.sg,c.$G],styles:['.switch-body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{border:0;box-sizing:border-box;margin:0;padding:0}[_ngcontent-%COMP%]:root{font-size:calc(48px + (60 - 48)*(100vw - 320px)/(1024 - 320))}.switch[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{color:#fff;font:1em "Helvetica Neue",Helvetica,sans-serif;line-height:1.5}.rounded-bottom-0[_ngcontent-%COMP%]{border-bottom-left-radius:0!important;border-bottom-right-radius:0!important}.rounded-top-0[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-top-right-radius:0!important}.bg-gray[_ngcontent-%COMP%]{background:#575757!important}.bg-green[_ngcontent-%COMP%]{background:#2b7f3a!important}.switch[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;overflow:hidden}.toggle-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:row}.toggle[_ngcontent-%COMP%], .toggle[_ngcontent-%COMP%]:before, .slot__label[_ngcontent-%COMP%], .switch[_ngcontent-%COMP%]{transition-property:background-color,transform,visibility;transition-duration:.25s;transition-timing-function:ease-in,cubic-bezier(.6,.2,.4,1.5),linear}.toggle[_ngcontent-%COMP%]:before, .slot[_ngcontent-%COMP%], .slot__label[_ngcontent-%COMP%]{display:block}.toggle[_ngcontent-%COMP%]:before, .curtain[_ngcontent-%COMP%]{position:absolute}.toggle[_ngcontent-%COMP%]:checked, .curtain[_ngcontent-%COMP%]{background-color:#2b7f3a!important}.toggle[_ngcontent-%COMP%]:focus{outline:transparent}.toggle[_ngcontent-%COMP%]{border-radius:.75em;box-shadow:0 0 0 .1em inset;cursor:pointer;position:relative;margin-right:.25em;width:3em;height:1.5em;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-tap-highlight-color:transparent}.toggle[_ngcontent-%COMP%]:before{background:currentColor;border-radius:50%;content:"";top:.2em;left:.2em;width:1.1em;height:1.1em}.toggle[_ngcontent-%COMP%]:checked:before{transform:translate(1.5em)}.toggle[_ngcontent-%COMP%]:checked ~ .slot[_ngcontent-%COMP%]   .slot__label[_ngcontent-%COMP%], .slot__label[_ngcontent-%COMP%]:nth-child(2){transform:translateY(-50%) scaleY(0)}.toggle[_ngcontent-%COMP%]:checked ~ .slot[_ngcontent-%COMP%]   .slot__label[_ngcontent-%COMP%]:nth-child(2){transform:translateY(-100%) scaleY(1)}.toggle[_ngcontent-%COMP%]:checked ~ .curtain[_ngcontent-%COMP%]{transform:scaleX(1)}.slot[_ngcontent-%COMP%]{color:transparent;font-size:1.5em;font-weight:bold;letter-spacing:.1em;line-height:1;overflow:hidden;height:1em;text-indent:-.9em;-webkit-text-stroke:.05em #fff}.switch[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:1.2em;font-weight:bold;letter-spacing:.1em;line-height:1;overflow:hidden;height:1em;-webkit-text-stroke:.025em #fff}.slot__label[_ngcontent-%COMP%]{transform-origin:50% 0}.slot__label[_ngcontent-%COMP%]:nth-child(2){transform-origin:50% 100%}.curtain[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:50px;transform:scaleX(0);transform-origin:0 50%;z-index:-1}.active-low[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;padding:.2rem .4rem}']}),n})();function it(n,i){1&n&&(t.TgZ(0,"span",22),t._uU(1,"AL"),t.qZA())}function at(n,i){if(1&n&&t._UZ(0,"i"),2&n){const e=t.oxw();t.Gre("bi bi-",e.iconName," card-icon2 p-3")}}function rt(n,i){if(1&n&&t._UZ(0,"img",23),2&n){const e=t.oxw();t.Q6J("src",e.imageUrl,t.LSH)}}function lt(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Status"),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(4),t.Tol((null!=e.data.board&&e.data.board.is_online?"bg-success":"bg-danger")+" badge mx-1"),t.xp6(1),t.hij(" ",null!=e.data.board&&e.data.board.is_online?"Online":"Offline"," ")}}function st(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td",29),t.TgZ(2,"span",33),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td",29),t._UZ(5,"i",34),t.qZA(),t.TgZ(6,"td",31),t.TgZ(7,"span",33),t._uU(8),t.qZA(),t.qZA(),t.qZA()),2&n){const e=i.$implicit;let o;t.xp6(3),t.Oqu(null!==(o=e.sensor_pin)&&void 0!==o?o:e.actuator_pin),t.xp6(5),t.Oqu(e.board_pin+e.board_pin_number)}}function ct(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Connections"),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"table"),t.TgZ(5,"tr",28),t.TgZ(6,"th",29),t.TgZ(7,"small",30),t._uU(8,"S/A Pin"),t.qZA(),t.qZA(),t._UZ(9,"th",29),t.TgZ(10,"th",31),t.TgZ(11,"small",30),t._uU(12,"Board Pin"),t.qZA(),t.qZA(),t.qZA(),t.YNc(13,st,9,2,"tr",32),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(13),t.Q6J("ngForOf",e.connections)}}function dt(n,i){if(1&n&&(t.TgZ(0,"span",36),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.column," ")}}function mt(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Expected data"),t.qZA(),t.TgZ(3,"td"),t.YNc(4,dt,2,1,"span",35),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.columns)}}function gt(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Token"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(e.token)}}function pt(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Interval"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(e.interval)}}function ut(n,i){if(1&n&&(t.TgZ(0,"div",1),t.TgZ(1,"div",24),t.TgZ(2,"p",25),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"table",26),t.YNc(5,lt,6,3,"tr",27),t.YNc(6,ct,14,1,"tr",27),t.YNc(7,mt,5,1,"tr",27),t.YNc(8,gt,5,1,"tr",27),t.YNc(9,pt,5,1,"tr",27),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.deviceName),t.xp6(2),t.Q6J("ngIf",e.showStatus),t.xp6(1),t.Q6J("ngIf",0!=e.connections.length),t.xp6(1),t.Q6J("ngIf",0!=e.columns.length),t.xp6(1),t.Q6J("ngIf",e.token),t.xp6(1),t.Q6J("ngIf",e.interval)}}function _t(n,i){if(1&n&&(t.TgZ(0,"div",37),t.TgZ(1,"p",30),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.linkMessage," ")}}function ht(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=t.MAs(20);return a.modalService.open(r,a.modalSize)}),t._uU(1," View Device "),t.qZA()}if(2&n){const e=t.oxw();t.Gre("btn btn-",e.color,"")}}function ft(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=t.MAs(22);return a.modalService.open(r,a.modalDeleteSize)}),t._UZ(1,"i",40),t.qZA()}}function vt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=t.MAs(24);return a.modalService.open(r,a.modalEditSize)}),t._UZ(1,"i",42),t.qZA()}}function Ct(n,i){1&n&&t.GkF(0)}function Zt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",43),t.TgZ(1,"h2",44),t._uU(2),t.qZA(),t.TgZ(3,"button",45),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t.qZA(),t.qZA(),t.TgZ(4,"div",46),t.YNc(5,Ct,1,0,"ng-container",47),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.heading),t.xp6(3),t.Q6J("ngComponentOutlet",e.modalContent)("ngComponentOutletInjector",e.dataInjected)}}function bt(n,i){1&n&&t.GkF(0)}function wt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",48),t.TgZ(1,"h2",44),t._uU(2),t.qZA(),t.TgZ(3,"button",49),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t._UZ(4,"i",50),t.qZA(),t.qZA(),t.TgZ(5,"div",46),t.YNc(6,bt,1,0,"ng-container",47),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.headingDelete),t.xp6(4),t.Q6J("ngComponentOutlet",e.modalDeleteContent)("ngComponentOutletInjector",e.dataInjected)}}function Tt(n,i){1&n&&t.GkF(0)}function xt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",43),t.TgZ(1,"h2",44),t._uU(2),t.qZA(),t.TgZ(3,"button",49),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t._UZ(4,"i",50),t.qZA(),t.qZA(),t.TgZ(5,"div",46),t.YNc(6,Tt,1,0,"ng-container",47),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("Edit ",e.deviceName,""),t.xp6(4),t.Q6J("ngComponentOutlet",e.modalEditContent)("ngComponentOutletInjector",e.dataInjected)}}let S=(()=>{class n{constructor(e,o,a){this.config=e,this.injector=o,this.modalService=a,this.dataInjected={},this.heading="View Device",this.headingDelete="Delete Device",this.imageUrl=this.config.preferences.imageSelector,this.iconName="plus-circle-fill",this.color="tertiary",this.isImage=!1,this.showStatus=!0,this.textButton=!1,this.link=!0,this.linkMessage='Click the "plus" icon to link a device.',this.deviceName="Device Name",this.isActiveLow=!1,this.token="",this.interval="",this.connections=[],this.columns=[],this.modalSize="md",this.deleteAction=!1,this.modalDeleteSize="md",this.editAction=!1,this.modalEditSize="md",this.data=[]}ngOnInit(){this.dataInjected=this.createInjector(this.data)}createInjector(e){return t.zs3.create([{provide:v.i,useValue:e}],this.injector)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g._),t.Y36(t.zs3),t.Y36(f.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-hardware-list-card"]],inputs:{heading:"heading",headingDelete:"headingDelete",imageUrl:"imageUrl",iconName:"iconName",color:"color",isImage:"isImage",showStatus:"showStatus",textButton:"textButton",link:"link",linkMessage:"linkMessage",deviceName:"deviceName",isActiveLow:"isActiveLow",token:"token",interval:"interval",connections:"connections",columns:"columns",modalContent:"modalContent",modalSize:"modalSize",deleteAction:"deleteAction",modalDeleteContent:"modalDeleteContent",modalDeleteSize:"modalDeleteSize",editAction:"editAction",modalEditContent:"modalEditContent",modalEditSize:"modalEditSize",data:"data"},decls:25,vars:11,consts:[[1,"row","mb-3"],[1,"col-12"],[1,"card","border-0","shadow"],[1,"card-body","d-flex","justify-content-around","h-card-fixed"],[1,"row"],[1,"col-12","text-center","mb-3","align-items-center","justify-content-center","pointer",3,"click"],["class","badge bg-warning active-low",4,"ngIf"],[3,"class",4,"ngIf"],["height","185px",3,"src",4,"ngIf"],["class","col-12",4,"ngIf"],["class","col-12 card-link-device",4,"ngIf"],[1,"col-12","m-0","p-0"],[1,"row","m-0","p-0","mt-2"],[1,"col","col-md-8"],["placement","bottom","ngbTooltip","Edit",3,"class","click",4,"ngIf"],[1,"col","col-md-4"],["class","btn btn-danger float-right","placement","bottom","ngbTooltip","Delete",3,"click",4,"ngIf"],["class","btn btn-primary float-right","style","margin-right: 5px","placement","bottom","ngbTooltip","Edit",3,"click",4,"ngIf"],["class","p-0"],["modal",""],["modalDelete",""],["modalEdit",""],[1,"badge","bg-warning","active-low"],["height","185px",3,"src"],[1,"d-none","d-sm-block"],[1,"fw-extrabold","mb-2","text-center"],[1,"small","table","table-bordered","table-sm"],[4,"ngIf"],[1,"text-center"],[2,"padding","0 !important"],[1,"font-weight-750"],[2,"padding","0 !important","padding-left","3px !important"],[4,"ngFor","ngForOf"],[1,"badge","bg-dark"],[1,"bi","bi-arrow-right"],["class","badge bg-success mx-1",4,"ngFor","ngForOf"],[1,"badge","bg-success","mx-1"],[1,"col-12","card-link-device"],["placement","bottom","ngbTooltip","Edit",3,"click"],["placement","bottom","ngbTooltip","Delete",1,"btn","btn-danger","float-right",3,"click"],[1,"bi","bi-trash"],["placement","bottom","ngbTooltip","Edit",1,"btn","btn-primary","float-right",2,"margin-right","5px",3,"click"],[1,"bi","bi-pencil"],[1,"modal-header","bg-dark","text-white"],[1,"h6","modal-title"],["type","button",1,"btn-close","bg-white",3,"click"],[1,"modal-body"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[1,"modal-header","bg-danger","text-white"],["type","button",1,"btn","btn-link","border-0","text-white",3,"click"],[1,"bi","bi-x-lg"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.NdJ("click",function(){t.CHM(a);const d=t.MAs(20);return o.modalService.open(d,o.modalSize)}),t.TgZ(6,"div"),t.YNc(7,it,2,0,"span",6),t.YNc(8,at,1,3,"i",7),t.YNc(9,rt,1,1,"img",8),t.qZA(),t.qZA(),t.YNc(10,ut,10,6,"div",9),t.YNc(11,_t,3,1,"div",10),t.TgZ(12,"div",11),t.TgZ(13,"div",12),t.TgZ(14,"div",13),t.YNc(15,ht,2,3,"button",14),t.qZA(),t.TgZ(16,"div",15),t.YNc(17,ft,2,0,"button",16),t.YNc(18,vt,2,0,"button",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,Zt,6,3,"ng-template",18,19,t.W1O),t.YNc(21,wt,7,3,"ng-template",18,20,t.W1O),t.YNc(23,xt,7,3,"ng-template",18,21,t.W1O)}2&e&&(t.xp6(6),t.Gre("icon-shape shadow icon-shape-",o.color," rounded"),t.xp6(1),t.Q6J("ngIf",o.isActiveLow),t.xp6(1),t.Q6J("ngIf",!o.isImage),t.xp6(1),t.Q6J("ngIf",o.isImage),t.xp6(1),t.Q6J("ngIf",!o.link),t.xp6(1),t.Q6J("ngIf",o.link),t.xp6(4),t.Q6J("ngIf",o.textButton),t.xp6(2),t.Q6J("ngIf",o.deleteAction),t.xp6(1),t.Q6J("ngIf",o.editAction))},directives:[c.O5,c.sg,c.$G],styles:[".active-low[_ngcontent-%COMP%]{position:absolute;top:35px;right:35px}"]}),n})();function At(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-control-smart-device-card",5),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();let a;t.xp6(1),t.Q6J("imageUrl",o.api.storageHost+e.sensor.image_url)("isImage",!0)("color","success")("deviceName",null!==(a=e.sensor.user_defined_name)&&void 0!==a?a:e.sensor.name)("deviceId",e.sensor.id)("isSwitchedOn",e.sensor.is_switched_on)("isActiveLow",e.sensor.is_active_low)("link",!1)("textButton",!0)("showStatus",!1)("deleteAction",!0)("editAction",!0)("modalSize","lg")("modalEditContent",o.modalEditComponent)("modalContent",o.modalViewComponent)("modalDeleteContent",o.modalDeleteComponent)("interval",e.sensor.interval)("data",e)("connections",e.connections)("columns",e.columns)}}function St(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",6),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("modalSize","lg")("color","warning")("linkMessage","No appliance found, Data from new appliance will be displayed here.")("iconName","exclamation")("data",e.data)}}let Nt=(()=>{class n{constructor(e,o,a,r){this.sensorsService=e,this.config=o,this.api=a,this.fn=r,this.data=[],this.modalEditComponent=B,this.modalViewComponent=I.k,this.modalDeleteComponent=O}ngOnInit(){this.getSensors()}getSensors(){this.sensorsService.getAutoAddedUserSensors().then(e=>{e.error||(this.data=e.data)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.n),t.Y36(g._),t.Y36(C.s),t.Y36(Z.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-auto-sensors"]],decls:4,vars:4,consts:[[3,"exportOptions","newButton"],[1,"row"],["class","col col-md-3",4,"ngFor","ngForOf"],["class","col col-md-3",4,"ngIf"],[1,"col","col-md-3"],["headingDelete","Unlink Sensor",3,"imageUrl","isImage","color","deviceName","deviceId","isSwitchedOn","isActiveLow","link","textButton","showStatus","deleteAction","editAction","modalSize","modalEditContent","modalContent","modalDeleteContent","interval","data","connections","columns"],["heading","No sensor found.",3,"modalSize","color","linkMessage","iconName","data"]],template:function(e,o){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.YNc(2,At,2,20,"div",2),t.YNc(3,St,2,5,"div",3),t.qZA()),2&e&&(t.Q6J("exportOptions",!1)("newButton",!1),t.xp6(2),t.Q6J("ngForOf",o.data),t.xp6(1),t.Q6J("ngIf",0==o.data.length))},directives:[A.N,c.sg,c.O5,ot,S],styles:[""]}),n})();var kt=s(1326),qt=s(9672),It=s(6284),Ot=s(1716);function Ut(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",5),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();let a;t.xp6(1),t.Q6J("imageUrl",o.api.storageHost+e.actuator.image_url)("isImage",!0)("link",!1)("textButton",!0)("showStatus",!1)("deleteAction",!0)("color","success")("isActiveLow",e.actuator.is_active_low)("modalSize","lg")("modalContent",o.modalViewComponent)("modalDeleteContent",o.modalDeleteComponent)("deviceName",null!==(a=e.actuator.user_defined_name)&&void 0!==a?a:e.actuator.name)("interval",e.actuator.interval)("data",e)("connections",e.connections)("columns",e.columns)}}function Jt(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",6),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("modalSize","lg")("color","success")("modalContent",e.modalComponent)("linkMessage","Click the plus icon to link another device.")("iconName","node-plus-fill")("data",e.data)}}function Yt(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("modalSize","lg")("color","success")("modalContent",e.modalComponent)("linkMessage","Click the plus icon to link a device.")("iconName","plus-circle-fill")("data",e.data)}}let Dt=(()=>{class n{constructor(e,o,a,r){this.actuatorsService=e,this.config=o,this.api=a,this.fn=r,this.data=[],this.modalComponent=It.m,this.modalViewComponent=kt.M,this.modalDeleteComponent=qt.d}ngOnInit(){this.getActuators()}getActuators(){this.actuatorsService.getUserActuators().then(e=>{e.error||(this.data=e.data)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ot.G),t.Y36(g._),t.Y36(C.s),t.Y36(Z.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-actuators"]],decls:5,vars:5,consts:[[3,"exportOptions","newButton"],[1,"row"],["class","col col-md-3",4,"ngFor","ngForOf"],["class","col col-md-3",4,"ngIf"],[1,"col","col-md-3"],["headingDelete","Unlink Actuator",3,"imageUrl","isImage","link","textButton","showStatus","deleteAction","color","isActiveLow","modalSize","modalContent","modalDeleteContent","deviceName","interval","data","connections","columns"],["heading","Link Another Actuator",3,"modalSize","color","modalContent","linkMessage","iconName","data"],["heading","Link Actuator",3,"modalSize","color","modalContent","linkMessage","iconName","data"]],template:function(e,o){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.YNc(2,Ut,2,16,"div",2),t.YNc(3,Jt,2,6,"div",3),t.YNc(4,Yt,2,6,"div",3),t.qZA()),2&e&&(t.Q6J("exportOptions",!1)("newButton",!1),t.xp6(2),t.Q6J("ngForOf",o.data),t.xp6(1),t.Q6J("ngIf",0!=o.data.length),t.xp6(1),t.Q6J("ngIf",0==o.data.length))},directives:[A.N,c.sg,c.O5,S],styles:[""]}),n})();var N=s(2695);function yt(n,i){if(1&n&&(t.TgZ(0,"option",8),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.sensor.id),t.xp6(1),t.Oqu(e.sensor.name)}}function Qt(n,i){if(1&n&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.name||null==e.name.errors?null:e.name.errors.message)}}function Mt(n,i){if(1&n&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.interval||null==e.interval.errors?null:e.interval.errors.message)}}function Lt(n,i){if(1&n&&(t.TgZ(0,"option",8),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.pin_type)}}function Bt(n,i){if(1&n&&(t.TgZ(0,"option",8),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.pin_type+e.pin_number)}}function Ft(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",20),t.TgZ(2,"div",3),t.TgZ(3,"select",21),t.YNc(4,Lt,2,2,"option",5),t.qZA(),t.TgZ(5,"label",22),t._uU(6,"Sensor Pin"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",20),t.TgZ(8,"div",3),t.TgZ(9,"select",23),t.NdJ("change",function(){const r=t.CHM(e).index;return t.oxw(2).changePin(r)}),t.YNc(10,Bt,2,2,"option",5),t.qZA(),t.TgZ(11,"label",24),t._uU(12,"Board Pin"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.index,o=t.oxw(2);t.xp6(3),t.Q6J("formControlName","floatingSensorPin"+e),t.xp6(1),t.Q6J("ngForOf",o.datum[0].pins),t.xp6(5),t.Q6J("formControlName","floatingBoardPin"+e),t.xp6(1),t.Q6J("ngForOf",o.activeBoard.pins)}}function Pt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"h6",9),t._uU(2,"Name"),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"input",10),t.TgZ(5,"label",11),t._uU(6,"Name"),t.qZA(),t.YNc(7,Qt,2,1,"p",12),t.qZA(),t.TgZ(8,"h6",9),t._uU(9,"Get data from this sensor after every ? (seconds)"),t.qZA(),t.TgZ(10,"div",3),t._UZ(11,"input",13),t.TgZ(12,"label",14),t._uU(13,"Interval"),t.qZA(),t.YNc(14,Mt,2,1,"p",12),t.qZA(),t.TgZ(15,"h6",9),t._uU(16),t.qZA(),t.YNc(17,Ft,13,4,"div",15),t.TgZ(18,"button",16),t._uU(19," Link Sensor "),t._UZ(20,"i",17),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(4),t.ekj("invalid",(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid)),t.xp6(3),t.Q6J("ngIf",(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid)),t.xp6(4),t.ekj("invalid",(null==e.interval?null:e.interval.touched)&&(null==e.interval?null:e.interval.invalid)),t.xp6(3),t.Q6J("ngIf",(null==e.interval?null:e.interval.touched)&&(null==e.interval?null:e.interval.invalid)),t.xp6(2),t.AsE("Connect ",null==e.datum[0].sensor?null:e.datum[0].sensor.name," sensor with ",null==e.activeBoard.board?null:e.activeBoard.board.name," board"),t.xp6(1),t.Q6J("ngForOf",e.rows),t.xp6(1),t.ekj("disabled",!e.form.valid),t.Q6J("type",e.form.valid?"submit":"button")}}function Ht(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",25),t.TgZ(2,"div",26),t.TgZ(3,"div",27),t._UZ(4,"img",28),t.qZA(),t.qZA(),t.TgZ(5,"div",29),t.TgZ(6,"div",30),t._UZ(7,"img",31),t.qZA(),t.qZA(),t.TgZ(8,"div",26),t.TgZ(9,"div",27),t._UZ(10,"img",28),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("src",e.api.storageHost+e.datum[0].sensor.image_url,t.LSH)("alt",e.datum[0].sensor.name),t.xp6(3),t.Q6J("src",e.config.preferences.imageConnect,t.LSH),t.xp6(3),t.Q6J("src",e.api.storageHost+e.activeBoard.board.image_url,t.LSH)("alt",e.activeBoard.board.name)}}function Et(n,i){1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",32),t._uU(2," Error: No board have been linked to your account! you can not link a sensor without a connection to a board. "),t.qZA(),t.qZA())}function zt(n,i){1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",33),t._uU(2," Select sensor to preview and link to your account, you will connect all sensor pins to a board. "),t.qZA(),t.qZA())}let jt=(()=>{class n{constructor(e,o,a,r,d,b,w){this.fn=e,this.sensorsService=o,this.boardsService=a,this.api=r,this.loader=d,this.modal=b,this.config=w,this.rows=[],this.connections=[],this.form=new l.cw({sensorId:new l.NI("",[m.b.required]),name:new l.NI("",[m.b.required]),interval:new l.NI("",[m.b.required])}),this.onSubmit=()=>{var p,u,_;const T={sensorId:null===(p=this.sensorId)||void 0===p?void 0:p.value,userBoardId:this.activeBoard.board.id,name:null===(u=this.name)||void 0===u?void 0:u.value,interval:null===(_=this.interval)||void 0===_?void 0:_.value,connections:this.connections};this.sensorsService.newUserSensor(T).then(k=>{k.error||(this.modal.close(),this.loader.refresh())})}}get sensorId(){return this.form.get("sensorId")}get name(){return this.form.get("name")}get interval(){return this.form.get("interval")}ngOnInit(){this.getSensors(),this.getActiveBoard(),console.log(this.datum)}addPin(e){const o=this.rows.length;this.form.setControl("floatingSensorPin"+o,new l.NI({value:this.datum[0].pins[e].id,disabled:!0})),this.form.setControl("floatingBoardPin"+o,new l.NI(this.activeBoard.pins[0].id)),this.connections.push({id:o,sensorPinId:this.datum[0].pins[e].id,boardPinId:this.activeBoard.pins[0].id}),this.rows.push(Math.random())}changePin(e){var o;let a=this.connections.filter(r=>r.id==e)[0];a.boardPinId=null===(o=this.form.get("floatingBoardPin"+e))||void 0===o?void 0:o.value,this.connections=this.connections.filter(r=>r.id!=e),this.connections.push(a)}getSensors(){this.sensorsService.getSensorsUnfiltered().then(e=>{e.error||(this.data=e.data)})}getActiveBoard(){this.boardsService.getUserBoards().then(e=>{e.error||(this.activeBoard=e.data[0])})}previewSensor(){this.rows=[],this.connections=[],this.datum=this.data.filter(e=>{var o;return e.sensor.id==(null===(o=this.sensorId)||void 0===o?void 0:o.value)}),1==this.datum.length&&this.activeBoard&&this.datum[0].pins.forEach((e,o)=>this.addPin(o))}filterPins(e,o){return e.filter(a=>a.pin_type==o)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.d),t.Y36(h.n),t.Y36(N.E),t.Y36(C.s),t.Y36(x.D),t.Y36(f.F),t.Y36(g._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-sensors"]],decls:12,vars:7,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"row"],[1,"col","col-12"],[1,"form-floating","mb-3"],["id","sensor","aria-placeholder","Sensor",1,"form-control",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],["for","sensor",1,"my-1","me-2"],[4,"ngIf"],[3,"value"],[1,"font-weight-750","m-0"],["formControlName","name","name","text","id","floatingname","placeholder","Name",1,"form-control"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","interval","name","text","id","floatinginterval","placeholder","Interval",1,"form-control"],["for","floatinginterval"],["class","row clear-both",4,"ngFor","ngForOf"],[1,"w-100","btn","btn-primary",3,"type"],[1,"bi","bi-file-earmark-plus-fill"],[1,"text-danger","font-weight-bold","p-0","m-0"],[1,"row","clear-both"],[1,"col","col-md-6"],["id","sensorPin","aria-placeholder","Sensor Pin",1,"form-control",3,"formControlName"],["for","sensorPin",1,"my-1","me-2"],["id","boardPin","aria-placeholder","Board Pin",1,"form-control",3,"formControlName","change"],["for","boardPin",1,"my-1","me-2"],[1,"p-2","row"],[1,"col","col-md-5"],[1,"alert","content-center"],[3,"src","alt"],[1,"col","col-md-2"],[1,"alert","content-center","rotate-90"],[3,"src"],[1,"alert","alert-danger"],[1,"alert","alert-info"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"select",4),t.NdJ("change",function(){return o.previewSensor()}),t.YNc(5,yt,2,2,"option",5),t.qZA(),t.TgZ(6,"label",6),t._uU(7,"Sensor"),t.qZA(),t.qZA(),t.YNc(8,Pt,21,12,"ng-container",7),t.qZA(),t.qZA(),t.YNc(9,Ht,11,5,"ng-container",7),t.qZA(),t.YNc(10,Et,3,0,"div",7),t.YNc(11,zt,3,0,"div",7)),2&e&&(t.Q6J("formGroup",o.form),t.xp6(4),t.Q6J("formControlName","sensorId"),t.xp6(1),t.Q6J("ngForOf",o.data),t.xp6(3),t.Q6J("ngIf",o.datum&&o.activeBoard),t.xp6(1),t.Q6J("ngIf",o.datum&&o.activeBoard),t.xp6(1),t.Q6J("ngIf",!o.activeBoard&&o.datum),t.xp6(1),t.Q6J("ngIf",!o.datum))},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,c.sg,c.O5,l.YN,l.Kr,l.Fj],styles:[""]}),n})();function Gt(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",5),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();let a;t.xp6(1),t.Q6J("imageUrl",o.api.storageHost+e.sensor.image_url)("isImage",!0)("link",!1)("textButton",!0)("showStatus",!1)("deleteAction",!0)("color","warning")("modalSize","lg")("modalContent",o.modalViewComponent)("modalDeleteContent",o.modalDeleteComponent)("deviceName",null!==(a=e.sensor.user_defined_name)&&void 0!==a?a:e.sensor.name)("interval",e.sensor.interval)("data",e)("connections",e.connections)("columns",e.columns)}}function $t(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",6),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("modalSize","lg")("color","warning")("modalContent",e.modalComponent)("linkMessage","Click the plus icon to link another device.")("iconName","node-plus-fill")("data",e.data)}}function Vt(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("modalSize","lg")("color","warning")("modalContent",e.modalComponent)("linkMessage","Click the plus icon to link a device.")("iconName","plus-circle-fill")("data",e.data)}}let Xt=(()=>{class n{constructor(e,o,a,r){this.sensorsService=e,this.config=o,this.api=a,this.fn=r,this.data=[],this.modalComponent=jt,this.modalViewComponent=I.k,this.modalDeleteComponent=O}ngOnInit(){this.getSensors()}getSensors(){this.sensorsService.getUserSensors().then(e=>{e.error||(this.data=e.data)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.n),t.Y36(g._),t.Y36(C.s),t.Y36(Z.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sensors"]],decls:5,vars:5,consts:[[3,"exportOptions","newButton"],[1,"row"],["class","col col-md-3",4,"ngFor","ngForOf"],["class","col col-md-3",4,"ngIf"],[1,"col","col-md-3"],["headingDelete","Unlink Sensor",3,"imageUrl","isImage","link","textButton","showStatus","deleteAction","color","modalSize","modalContent","modalDeleteContent","deviceName","interval","data","connections","columns"],["heading","Link Another Sensor",3,"modalSize","color","modalContent","linkMessage","iconName","data"],["heading","Link Sensor",3,"modalSize","color","modalContent","linkMessage","iconName","data"]],template:function(e,o){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.YNc(2,Gt,2,15,"div",2),t.YNc(3,$t,2,6,"div",3),t.YNc(4,Vt,2,6,"div",3),t.qZA()),2&e&&(t.Q6J("exportOptions",!1)("newButton",!1),t.xp6(2),t.Q6J("ngForOf",o.data),t.xp6(1),t.Q6J("ngIf",0!=o.data.length),t.xp6(1),t.Q6J("ngIf",0==o.data.length))},directives:[A.N,c.sg,c.O5,S],styles:[""]}),n})();var Wt=s(2761),Rt=s(1183);let Kt=(()=>{class n{constructor(e,o,a,r,d){this.modal=e,this.boardService=o,this.loader=a,this.dataIn=r,this.boardState=d,this.form=new l.cw({boardId:new l.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("boardId",new l.NI(this.data.board.id)))}get boardId(){return this.form.get("boardId")}onSubmit(){var e;this.boardService.deleteUserBoard(null===(e=this.boardId)||void 0===e?void 0:e.value).then(o=>{o.error||(this.modal.close(),this.boardState.getActiveBoard(),this.loader.refresh())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.F),t.Y36(N.E),t.Y36(x.D),t.Y36(v.i),t.Y36(Rt.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-boards"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1," Unlink this board?"),t._UZ(2,"br"),t._UZ(3,"br"),t._uU(4," Your physical device will no longer be able to communicate with the system.\n"),t.qZA(),t.TgZ(5,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(6,"button",1),t._uU(7," Delete "),t._UZ(8,"i",2),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(1),t.ekj("disabled",o.form.invalid),t.Q6J("type",o.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg],styles:[""]}),n})();var te=s(7768);function ee(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",5),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("imageUrl",o.api.storageHost+e.board.image_url)("isImage",!0)("link",!1)("textButton",!0)("deleteAction",!0)("color","info")("modalSize","lg")("modalContent",o.modalViewComponent)("modalDeleteContent",o.modalDeleteComponent)("deviceName",e.board.name)("token",e.board.token)("data",e)}}function ne(n,i){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-hardware-list-card",6),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("modalSize","lg")("color","info")("modalContent",e.modalComponent)("linkMessage","Click the plus icon to link a device.")("iconName","plus-circle-fill")("data",e.data)}}let oe=(()=>{class n{constructor(e,o,a,r){this.boardsService=e,this.config=o,this.api=a,this.fn=r,this.data=[],this.modalComponent=te.V,this.modalViewComponent=Wt.Y,this.modalDeleteComponent=Kt}ngOnInit(){this.getBoards()}getBoards(){this.boardsService.getUserBoards().then(e=>{e.error||(this.data=e.data)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N.E),t.Y36(g._),t.Y36(C.s),t.Y36(Z.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-boards"]],decls:4,vars:4,consts:[[3,"exportOptions","newButton"],[1,"row"],["class","col col-md-3",4,"ngFor","ngForOf"],["class","col col-md-3",4,"ngIf"],[1,"col","col-md-3"],["headingDelete","Unlink Board",3,"imageUrl","isImage","link","textButton","deleteAction","color","modalSize","modalContent","modalDeleteContent","deviceName","token","data"],["heading","Link Board",3,"modalSize","color","modalContent","linkMessage","iconName","data"]],template:function(e,o){1&e&&(t._UZ(0,"app-top-bar",0),t.TgZ(1,"div",1),t.YNc(2,ee,2,12,"div",2),t.YNc(3,ne,2,6,"div",3),t.qZA()),2&e&&(t.Q6J("exportOptions",!1)("newButton",!1),t.xp6(2),t.Q6J("ngForOf",o.data),t.xp6(1),t.Q6J("ngIf",0==o.data.length))},directives:[A.N,c.sg,c.O5,S],styles:[""]}),n})();var U=s(4330);const ie=[{path:"boards",component:oe},{path:"sensors",component:Xt},{path:"smart-appliances",component:Nt},{path:"actuators",component:Dt}];let ae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[U.Bz.forChild(ie)],U.Bz]}),n})(),re=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,J.T,Y.E,D.IJ,ae]]}),n})()}}]);