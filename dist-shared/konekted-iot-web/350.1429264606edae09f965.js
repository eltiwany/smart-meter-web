"use strict";(self.webpackChunkkonekted_iot_web=self.webpackChunkkonekted_iot_web||[]).push([[350],{1350:(bt,k,f)=>{f.r(k),f.d(k,{ConfigHardwaresModule:()=>Tt});var Y=f(5730),O=f(6631),x=f(3771),h=f(8583),l=f(665),e=f(7716),C=f(5120),q=f(8239),Q=f(5145),y=f(474);let b=(()=>{class o{constructor(t,n){this.http=t,this.api=n}getPinTypes(t){var n=this;return(0,q.Z)(function*(){return yield n.http.post(n.api.pinTypes.getPinTypes,t,!1)})()}getPinTypesUnfiltered(){var t=this;return(0,q.Z)(function*(){return yield t.http.get(t.api.pinTypes.pinTypes,!1)})()}newPinType(t){var n=this;return(0,q.Z)(function*(){return yield n.http.post(n.api.pinTypes.pinTypes,t,!0)})()}updatePinType(t,n){var i=this;return(0,q.Z)(function*(){return yield i.http.put(i.api.pinTypes.pinTypes,t,n,!0)})()}deletePinType(t){var n=this;return(0,q.Z)(function*(){return yield n.http.delete(n.api.pinTypes.pinTypes,t,!0)})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Q.$),e.LFG(y.s))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var T=f(1721),v=f(3002);let D=(()=>{class o{constructor(t,n,i,r){this.modal=t,this.pinTypes=n,this.loader=i,this.dataIn=r,this.form=new l.cw({pinTypeId:new l.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("pinTypeId",new l.NI(this.data.id)))}get pinTypeId(){return this.form.get("pinTypeId")}onSubmit(){var t;this.pinTypes.deletePinType(null===(t=this.pinTypeId)||void 0===t?void 0:t.value).then(n=>{n.error||(this.modal.close(),this.loader.refresh())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(b),e.Y36(T.D),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete-config-pin-types"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1," Delete this pin type?"),e._UZ(2,"br"),e._UZ(3,"br"),e._uU(4," If it has been assigned to board, sensor or actuator it won't be deleted.\n"),e.qZA(),e.TgZ(5,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"button",1),e._uU(7," Delete "),e._UZ(8,"i",2),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.form),e.xp6(1),e.ekj("disabled",n.form.invalid),e.Q6J("type",n.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg],styles:[""]}),o})();var Z=f(4371),w=f(1321);function B(o,a){if(1&o&&(e.TgZ(0,"p",7),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.type||null==t.type.errors?null:t.type.errors.message)}}let R=(()=>{class o{constructor(t,n,i,r,s){this.modal=t,this.pinTypes=n,this.loader=i,this.fn=r,this.dataIn=s,this.form=new l.cw({type:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var d;const m={type:null===(d=this.type)||void 0===d?void 0:d.value};this.pinTypes.updatePinType(this.data.id,m).then(_=>{_.error||(this.modal.close(),this.loader.refresh())})}}get type(){return this.form.get("type")}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("type",new l.NI(this.data.type,[Z.b.required])))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(b),e.Y36(T.D),e.Y36(w.d),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-config-pin-types"]],decls:9,vars:7,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["formControlName","type","type","text","id","floatingtype","placeholder","Type",1,"form-control"],["for","floatingtype"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],[1,"w-100","btn","btn-lg","btn-primary",3,"type"],[1,"bi","bi-check-circle-fill"],[1,"text-danger","font-weight-bold","p-0","m-0"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e._UZ(2,"input",2),e.TgZ(3,"label",3),e._uU(4,"Type"),e.qZA(),e.YNc(5,B,2,1,"p",4),e.qZA(),e.TgZ(6,"button",5),e._uU(7," Update "),e._UZ(8,"i",6),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(2),e.ekj("invalid",(null==n.type?null:n.type.touched)&&(null==n.type?null:n.type.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.type?null:n.type.touched)&&(null==n.type?null:n.type.invalid)),e.xp6(1),e.ekj("disabled",n.form.invalid),e.Q6J("type",n.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,h.O5],styles:[""]}),o})();function H(o,a){if(1&o&&(e.TgZ(0,"p",5),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.type||null==t.type.errors?null:t.type.errors.message)}}let M=(()=>{class o{constructor(t,n,i,r,s){this.modal=t,this.pinTypes=n,this.loader=i,this.fn=r,this.dataIn=s,this.form=new l.cw({type:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var d;const m={type:null===(d=this.type)||void 0===d?void 0:d.value};this.pinTypes.updatePinType(this.data.id,m).then(_=>{_.error||(this.modal.close(),this.loader.refresh())})}}get type(){return this.form.get("type")}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("type",new l.NI({value:this.data.type,disabled:!0},[Z.b.required])))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(b),e.Y36(T.D),e.Y36(w.d),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-config-pin-types"]],decls:6,vars:4,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["formControlName","type","type","text","id","floatingtype","placeholder","Type",1,"form-control"],["for","floatingtype"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],[1,"text-danger","font-weight-bold","p-0","m-0"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e._UZ(2,"input",2),e.TgZ(3,"label",3),e._uU(4,"Type"),e.qZA(),e.YNc(5,H,2,1,"p",4),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(2),e.ekj("invalid",(null==n.type?null:n.type.touched)&&(null==n.type?null:n.type.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.type?null:n.type.touched)&&(null==n.type?null:n.type.invalid)))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,h.O5],styles:[""]}),o})();function j(o,a){if(1&o&&(e.TgZ(0,"p",7),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.type||null==t.type.errors?null:t.type.errors.message)}}let L=(()=>{class o{constructor(t,n,i,r){this.modal=t,this.pinTypes=n,this.loader=i,this.fn=r,this.form=new l.cw({type:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var s;const d={type:null===(s=this.type)||void 0===s?void 0:s.value};this.pinTypes.newPinType(d).then(m=>{m.error||(this.modal.close(),this.loader.refresh())})}}get type(){return this.form.get("type")}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(b),e.Y36(T.D),e.Y36(w.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-new-config-pin-types"]],decls:9,vars:7,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["formControlName","type","type","text","id","floatingtype","placeholder","Type",1,"form-control"],["for","floatingtype"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],[1,"w-100","btn","btn-lg","btn-primary",3,"type"],[1,"bi","bi-file-earmark-plus-fill"],[1,"text-danger","font-weight-bold","p-0","m-0"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e._UZ(2,"input",2),e.TgZ(3,"label",3),e._uU(4,"Type"),e.qZA(),e.YNc(5,j,2,1,"p",4),e.qZA(),e.TgZ(6,"button",5),e._uU(7," Add "),e._UZ(8,"i",6),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(2),e.ekj("invalid",(null==n.type?null:n.type.touched)&&(null==n.type?null:n.type.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.type?null:n.type.touched)&&(null==n.type?null:n.type.invalid)),e.xp6(1),e.ekj("disabled",n.form.invalid),e.Q6J("type",n.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,h.O5],styles:[""]}),o})();var U=f(4957),J=f(1244);function V(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"tr"),e.TgZ(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"app-action-buttons",9),e.qZA(),e.qZA(),e.BQk()),2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.id),e.xp6(2),e.Oqu(t.type?t.type:"N/A"),e.xp6(2),e.Q6J("headingDelete","Delete Pin: "+t.type)("headingEdit","Edit Pin: "+t.type)("headingView","View Pin: "+t.type)("modalEditContent",n.modalEditComponent)("modalDeleteContent",n.modalDeleteComponent)("modalViewContent",n.modalViewComponent)("data",t)}}function z(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,V,8,9,"ng-container",8),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data)}}function G(o,a){1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"th",10),e._uU(3,"No data found."),e.qZA(),e.qZA(),e.qZA())}let X=(()=>{class o{constructor(t){this.pinType=t,this.dtOptions={},this.data=[],this.cols=["id","type"],this.modalComponent=L,this.modalViewComponent=M,this.modalEditComponent=R,this.modalDeleteComponent=D}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(t,n)=>{this.pinType.getPinTypes(t).then(i=>{this.data=i.data,n({recordsTotal:i.recordsTotal,recordsFiltered:i.recordsFiltered,data:[]})})},columns:[{data:"id"},{data:"type"},{data:"",orderable:!1}],responsive:!0}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-config-pin-types"]],decls:16,vars:9,consts:[["modalRef","newModal",3,"exportOptions","newButton","newButtonName","modalContent","dataArray","colsArray"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","modalDeleteContent","modalViewContent","data"],["colspan","3"]],template:function(t,n){1&t&&(e._UZ(0,"app-top-bar",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2,3),e.TgZ(4,"div",4),e.TgZ(5,"table",5),e.TgZ(6,"thead",6),e.TgZ(7,"tr"),e.TgZ(8,"th"),e._uU(9,"ID"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Type"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Actions"),e.qZA(),e.qZA(),e.qZA(),e.YNc(14,z,2,1,"tbody",7),e.YNc(15,G,4,0,"tbody",7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("exportOptions",!0)("newButton",!0)("newButtonName","New Pin")("modalContent",n.modalComponent)("dataArray",n.data)("colsArray",n.cols),e.xp6(5),e.Q6J("dtOptions",n.dtOptions),e.xp6(9),e.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),e.xp6(1),e.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[U.N,x.G,h.O5,h.sg,J.O],styles:[""]}),o})();var P=f(1716);let $=(()=>{class o{constructor(t,n,i,r){this.modal=t,this.actuatorService=n,this.loader=i,this.dataIn=r,this.form=new l.cw({actuatorId:new l.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("actuatorId",new l.NI(this.data.actuator.id)))}get actuatorId(){return this.form.get("actuatorId")}onSubmit(){var t;this.actuatorService.deleteActuator(null===(t=this.actuatorId)||void 0===t?void 0:t.value).then(n=>{n.error||(this.modal.close(),this.loader.refresh())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(P.G),e.Y36(T.D),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete-config-actuators"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1," Delete this actuator?"),e._UZ(2,"br"),e._UZ(3,"br"),e._uU(4," All users who have linked this actuator will be invalidated from the system! Proceed with caution.\n"),e.qZA(),e.TgZ(5,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"button",1),e._uU(7," Delete "),e._UZ(8,"i",2),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.form),e.xp6(1),e.ekj("disabled",n.form.invalid),e.Q6J("type",n.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg],styles:[""]}),o})();var A=f(6553),N=f(14);function K(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Upload Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.config.preferences.imageSelectorActuator,e.LSH)}}function W(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.imageFile?null:t.imageFile.link,e.LSH)}}function ee(o,a){if(1&o&&(e.TgZ(0,"label",21),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.api.storageHost+t.data.actuator.image_url,e.LSH)}}function te(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.name||null==t.name.errors?null:t.name.errors.message)}}function ne(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.description||null==t.description.errors?null:t.description.errors.message)}}function oe(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type)}}function ie(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",24),e.TgZ(2,"div",7),e.TgZ(3,"select",25),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.YNc(4,oe,2,2,"option",26),e.qZA(),e.TgZ(5,"label",27),e._uU(6,"Pin Type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e.TgZ(8,"div",7),e.TgZ(9,"input",29),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(10,"label",30),e._uU(11,"Pin Number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",24),e.TgZ(13,"div",7),e.TgZ(14,"input",31),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(15,"label",32),e._uU(16,"Remarks"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",33),e.TgZ(18,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removePin(r)}),e._UZ(19,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index,n=e.oxw();e.xp6(3),e.Q6J("formControlName","floatingpinType"+t),e.xp6(1),e.Q6J("ngForOf",n.pinTypes),e.xp6(5),e.Q6J("formControlName","floatingpinNumber"+t),e.xp6(5),e.Q6J("formControlName","floatingremarks"+t)}}function re(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",37),e.TgZ(2,"div",7),e.TgZ(3,"input",38),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRowForCols(r,"floatingcolumn"+r)}),e.qZA(),e.TgZ(4,"label",39),e._uU(5,"Column (Expected Result)"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",33),e.TgZ(7,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removeColumn(r)}),e._UZ(8,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index;e.xp6(3),e.Q6J("formControlName","floatingcolumn"+t)}}let le=(()=>{class o{constructor(t,n,i,r,s,d,m,_,u){this.modal=t,this.actuatorService=n,this.pinType=i,this.loader=r,this.fn=s,this.alert=d,this.api=m,this.config=_,this.dataIn=u,this.imageFile={link:"",file:void 0,name:""},this.pinTypes=[],this.actuatorPins=[],this.rows=[],this.columns=[],this.rowsForCols=[],this.form=new l.cw({name:new l.NI("",[Z.b.required]),description:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var g,p;const c=new FormData;c.append("id",this.data.actuator.id),c.append("imageUrl",this.imageFile.file),c.append("actuatorPins",JSON.stringify(this.actuatorPins)),c.append("columns",JSON.stringify(this.columns)),c.append("name",null===(g=this.name)||void 0===g?void 0:g.value),c.append("description",null===(p=this.description)||void 0===p?void 0:p.value),this.actuatorService.newActuator(c).then(F=>{F.error||(this.modal.close(),this.loader.refresh())})}}get name(){return this.form.get("name")}get description(){return this.form.get("description")}ngOnInit(){this.getPinTypes(),this.dataIn&&(this.data=this.dataIn,this.form.setControl("name",new l.NI(this.data.actuator.name,[Z.b.required])),this.form.setControl("description",new l.NI(this.data.actuator.description,[Z.b.required])),this.data.pins.forEach(()=>this.addPin()),this.data.columns.forEach(()=>this.addColumn()),this.rows.length==this.data.pins.length&&this.loadRows(),this.rowsForCols.length==this.data.columns.length&&this.loadRowsForCols())}addPin(){this.form.setControl("floatingpinType"+this.rows.length,new l.NI(1)),this.form.setControl("floatingpinNumber"+this.rows.length,new l.NI("")),this.form.setControl("floatingremarks"+this.rows.length,new l.NI("")),this.rows.push(Math.random())}removePin(t){this.actuatorPins=this.actuatorPins.filter((n,i)=>i!=t),this.rows=this.rows.filter((n,i)=>i!=t)}addRow(t,n,i,r){var s,d,m;const _=null===(s=this.form.get(n))||void 0===s?void 0:s.value,u=null===(d=this.form.get(i))||void 0===d?void 0:d.value,g=null===(m=this.form.get(r))||void 0===m?void 0:m.value;this.actuatorPins=this.actuatorPins.filter(p=>p.id!=t),this.actuatorPins.push({id:t,pinType:_,pinNumber:u,remarks:g})}loadRows(){this.data.pins.forEach((t,n)=>{var i,r,s;null===(i=this.form.get("floatingpinType"+n))||void 0===i||i.setValue(t.pin_type_id),null===(r=this.form.get("floatingpinNumber"+n))||void 0===r||r.setValue(t.pin_number),null===(s=this.form.get("floatingremarks"+n))||void 0===s||s.setValue(t.remarks),this.actuatorPins=this.actuatorPins.filter(d=>d.id!=n),this.actuatorPins.push({id:n,pinType:t.pin_type_id,pinNumber:t.pin_number,remarks:t.remarks})})}addColumn(){this.form.setControl("floatingcolumn"+this.rowsForCols.length,new l.NI("")),this.rowsForCols.push(Math.random())}removeColumn(t){this.columns=this.columns.filter((n,i)=>i!=t),this.rowsForCols=this.rowsForCols.filter((n,i)=>i!=t)}addRowForCols(t,n){var i;const r=null===(i=this.form.get(n))||void 0===i?void 0:i.value;this.columns=this.columns.filter(s=>s.id!=t),this.columns.push({id:t,column:r})}loadRowsForCols(){this.data.columns.forEach((t,n)=>{var i;null===(i=this.form.get("floatingcolumn"+n))||void 0===i||i.setValue(t.column),this.columns.push({id:n,column:t.column})})}getPinTypes(){return this.pinType.getPinTypesUnfiltered().then(t=>{t.error||(this.pinTypes=t.data)})}imagesPreview(t){if(t.target.files&&t.target.files[0]){let n=t.target.files[0].type.split("/").pop().toLowerCase(),i=t.target.files[0].size;if("jpeg"==n||"jpg"==n||"png"==n||"bmp"==n||"gif"==n||"svg"==n||"svg+xml"==n)if(i<1e6){const r=new FileReader;r.onload=s=>{this.imageFile={link:s.target.result,file:t.srcElement.files[0],name:t.srcElement.files[0].name}},r.readAsDataURL(t.target.files[0])}else this.alert.showError("Logo should not exceed 1MB in size!");else this.alert.showError("Only Images are Allowed!")}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(P.G),e.Y36(b),e.Y36(T.D),e.Y36(w.d),e.Y36(A.c),e.Y36(y.s),e.Y36(N._),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-config-actuators"]],decls:30,vars:15,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"p-2","row"],[1,"col-md-4"],["for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["for","imageFile","for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["type","file","id","imageFile",2,"display","none",3,"change"],[1,"col-md-8","table-responsive"],[1,"form-floating","mb-3"],["formControlName","name","name","text","id","floatingname","placeholder","Name",1,"form-control"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","description","description","text","id","floatingdescription","placeholder","Description",1,"form-control",2,"height","200px"],["for","floatingdescription"],["type","button",1,"btn","btn-danger","float-right","mb-3",3,"click"],[1,"bi","bi-node-plus-fill"],["class","row clear-both",4,"ngFor","ngForOf"],[1,"w-100","btn","btn-primary",3,"type"],[1,"bi","bi-check-circle-fill"],["for","imageFile",1,"text-right","w-100","pointer"],[1,"preview-image",3,"src"],[1,"mt-4","image-label","text-center","font-weight-900"],["for","imageFile","for","imageFile",1,"text-right","w-100","pointer"],[1,"text-danger","font-weight-bold","p-0","m-0"],[1,"row","clear-both"],[1,"col","col-md-4"],["id","state",1,"form-control",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],["for","state",1,"my-1","me-2"],[1,"col","col-md-3"],["type","number","placeholder","Pin Number",1,"form-control",3,"formControlName","change"],["for","floatingpinNumber"],["type","text","placeholder","Remarks",1,"form-control",3,"formControlName","change"],["for","floatingremarks"],[1,"col","col-md-1","col-lg-1"],[1,"mb-3","rounded","bg-danger","pointer",2,"height","55px !important",3,"click"],[1,"bi","bi-dash","text-white",2,"position","relative","top","15px","left","7px"],[3,"value"],[1,"col","col-md-11","col-lg-11"],["type","text","placeholder","Column (Expected Result)",1,"form-control",3,"formControlName","change"],["for","floatingcolumn"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,K,5,1,"label",3),e.YNc(4,W,5,1,"label",3),e.YNc(5,ee,5,1,"label",4),e.TgZ(6,"input",5),e.NdJ("change",function(r){return n.imagesPreview(r)}),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div"),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"Name"),e.qZA(),e.YNc(13,te,2,1,"p",10),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"textarea",11),e.TgZ(16,"label",12),e._uU(17,"Description"),e.qZA(),e.YNc(18,ne,2,1,"p",10),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return n.addPin()}),e._UZ(20,"i",14),e._uU(21," New Pin "),e.qZA(),e.YNc(22,ie,20,4,"div",15),e.TgZ(23,"button",13),e.NdJ("click",function(){return n.addColumn()}),e._UZ(24,"i",14),e._uU(25," New Column (Expected Result) "),e.qZA(),e.YNc(26,re,9,1,"div",15),e.qZA(),e.TgZ(27,"button",16),e._uU(28," Update "),e._UZ(29,"i",17),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file||n.data.actuator.image_url)),e.xp6(1),e.Q6J("ngIf",null==n.imageFile?null:n.imageFile.file),e.xp6(1),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file)&&n.data.actuator.image_url),e.xp6(5),e.ekj("invalid",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(2),e.ekj("invalid",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(4),e.Q6J("ngForOf",n.rows),e.xp6(4),e.Q6J("ngForOf",n.rowsForCols),e.xp6(1),e.ekj("disabled",!n.form.valid||n.actuatorPins.length<1),e.Q6J("type",n.form.valid&&n.actuatorPins.length>0?"submit":"button"))},directives:[l._Y,l.JL,l.sg,h.O5,l.Fj,l.JJ,l.u,h.sg,l.EJ,l.wV,l.YN,l.Kr],styles:[""]}),o})();var ae=f(1326);function se(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Upload Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.config.preferences.imageSelectorActuator,e.LSH)}}function de(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.imageFile?null:t.imageFile.link,e.LSH)}}function pe(o,a){if(1&o&&(e.TgZ(0,"label",21),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("src",t.api.storageHost+(null==(n=t.form.get("imageFile"))?null:n.value),e.LSH)}}function me(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.name||null==t.name.errors?null:t.name.errors.message)}}function ge(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.description||null==t.description.errors?null:t.description.errors.message)}}function ue(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type)}}function ce(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",24),e.TgZ(2,"div",7),e.TgZ(3,"select",25),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.YNc(4,ue,2,2,"option",26),e.qZA(),e.TgZ(5,"label",27),e._uU(6,"Pin Type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e.TgZ(8,"div",7),e.TgZ(9,"input",29),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(10,"label",30),e._uU(11,"Pin Number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",24),e.TgZ(13,"div",7),e.TgZ(14,"input",31),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(15,"label",32),e._uU(16,"Remarks"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",33),e.TgZ(18,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removePin(r)}),e._UZ(19,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index,n=e.oxw();e.xp6(3),e.Q6J("formControlName","floatingpinType"+t),e.xp6(1),e.Q6J("ngForOf",n.pinTypes),e.xp6(5),e.Q6J("formControlName","floatingpinNumber"+t),e.xp6(5),e.Q6J("formControlName","floatingremarks"+t)}}function fe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",37),e.TgZ(2,"div",7),e.TgZ(3,"input",38),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRowForCols(r,"floatingcolumn"+r)}),e.qZA(),e.TgZ(4,"label",39),e._uU(5,"Column (Expected Result)"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",33),e.TgZ(7,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removeColumn(r)}),e._UZ(8,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index;e.xp6(3),e.Q6J("formControlName","floatingcolumn"+t)}}let he=(()=>{class o{constructor(t,n,i,r,s,d,m,_){this.modal=t,this.actuatorService=n,this.pinType=i,this.loader=r,this.fn=s,this.alert=d,this.api=m,this.config=_,this.imageFile={link:"",file:void 0,name:""},this.pinTypes=[],this.actuatorPins=[],this.rows=[],this.columns=[],this.rowsForCols=[],this.form=new l.cw({name:new l.NI("",[Z.b.required]),description:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var u,g;const p=new FormData;p.append("imageUrl",this.imageFile.file),p.append("actuatorPins",JSON.stringify(this.actuatorPins)),p.append("columns",JSON.stringify(this.columns)),p.append("name",null===(u=this.name)||void 0===u?void 0:u.value),p.append("description",null===(g=this.description)||void 0===g?void 0:g.value),this.actuatorService.newActuator(p).then(c=>{c.error||(this.modal.close(),this.loader.refresh())})}}get name(){return this.form.get("name")}get description(){return this.form.get("description")}ngOnInit(){this.getPinTypes(),this.addPin(),this.addColumn()}addPin(){this.form.setControl("floatingpinType"+this.rows.length,new l.NI(1)),this.form.setControl("floatingpinNumber"+this.rows.length,new l.NI("")),this.form.setControl("floatingremarks"+this.rows.length,new l.NI("")),this.rows.push(Math.random())}removePin(t){this.actuatorPins=this.actuatorPins.filter((n,i)=>i!=t),this.rows=this.rows.filter((n,i)=>i!=t)}addRow(t,n,i,r){var s,d,m;const _=null===(s=this.form.get(n))||void 0===s?void 0:s.value,u=null===(d=this.form.get(i))||void 0===d?void 0:d.value,g=null===(m=this.form.get(r))||void 0===m?void 0:m.value;this.actuatorPins=this.actuatorPins.filter(p=>p.id!=t),this.actuatorPins.push({id:t,pinType:_,pinNumber:u,remarks:g})}addColumn(){this.form.setControl("floatingcolumn"+this.rowsForCols.length,new l.NI("")),this.rowsForCols.push(Math.random())}removeColumn(t){this.columns=this.columns.filter((n,i)=>i!=t),this.rowsForCols=this.rowsForCols.filter((n,i)=>i!=t)}addRowForCols(t,n){var i;const r=null===(i=this.form.get(n))||void 0===i?void 0:i.value;this.columns=this.columns.filter(s=>s.id!=t),this.columns.push({id:t,column:r})}getPinTypes(){return this.pinType.getPinTypesUnfiltered().then(t=>{t.error||(this.pinTypes=t.data)})}imagesPreview(t){if(t.target.files&&t.target.files[0]){let n=t.target.files[0].type.split("/").pop().toLowerCase(),i=t.target.files[0].size;if("jpeg"==n||"jpg"==n||"png"==n||"bmp"==n||"gif"==n||"svg"==n||"svg+xml"==n)if(i<1e6){const r=new FileReader;r.onload=s=>{this.imageFile={link:s.target.result,file:t.srcElement.files[0],name:t.srcElement.files[0].name}},r.readAsDataURL(t.target.files[0])}else this.alert.showError("Logo should not exceed 1MB in size!");else this.alert.showError("Only Images are Allowed!")}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(P.G),e.Y36(b),e.Y36(T.D),e.Y36(w.d),e.Y36(A.c),e.Y36(y.s),e.Y36(N._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-new-config-actuators"]],decls:30,vars:15,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"p-2","row"],[1,"col-md-4"],["for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["for","imageFile","for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["type","file","id","imageFile",2,"display","none",3,"change"],[1,"col-md-8"],[1,"form-floating","mb-3"],["formControlName","name","name","text","id","floatingname","placeholder","Name",1,"form-control"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","description","description","text","id","floatingdescription","placeholder","Description",1,"form-control",2,"height","200px"],["for","floatingdescription"],["type","button",1,"btn","btn-danger","float-right","mb-3",3,"click"],[1,"bi","bi-node-plus-fill"],["class","row clear-both",4,"ngFor","ngForOf"],[1,"w-100","btn","btn-primary",3,"type"],[1,"bi","bi-file-earmark-plus-fill"],["for","imageFile",1,"text-right","w-100","pointer"],[1,"preview-image",3,"src"],[1,"mt-4","image-label","text-center","font-weight-900"],["for","imageFile","for","imageFile",1,"text-right","w-100","pointer"],[1,"text-danger","font-weight-bold","p-0","m-0"],[1,"row","clear-both"],[1,"col","col-md-4","col-lg-4"],["id","state",1,"form-control",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],["for","state",1,"my-1","me-2"],[1,"col","col-md-3","col-lg-3"],["type","number","placeholder","Pin Number",1,"form-control",3,"formControlName","change"],["for","floatingpinNumber"],["type","text","placeholder","Remarks",1,"form-control",3,"formControlName","change"],["for","floatingremarks"],[1,"col","col-md-1","col-lg-1"],[1,"mb-3","rounded","bg-danger","pointer",2,"height","55px !important",3,"click"],[1,"bi","bi-dash","text-white",2,"position","relative","top","15px","left","7px"],[3,"value"],[1,"col","col-md-11","col-lg-11"],["type","text","placeholder","Column (Expected Result)",1,"form-control",3,"formControlName","change"],["for","floatingcolumn"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,se,5,1,"label",3),e.YNc(4,de,5,1,"label",3),e.YNc(5,pe,5,1,"label",4),e.TgZ(6,"input",5),e.NdJ("change",function(r){return n.imagesPreview(r)}),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div"),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"Name"),e.qZA(),e.YNc(13,me,2,1,"p",10),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"textarea",11),e.TgZ(16,"label",12),e._uU(17,"Description"),e.qZA(),e.YNc(18,ge,2,1,"p",10),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return n.addPin()}),e._UZ(20,"i",14),e._uU(21," New Pin "),e.qZA(),e.YNc(22,ce,20,4,"div",15),e.TgZ(23,"button",13),e.NdJ("click",function(){return n.addColumn()}),e._UZ(24,"i",14),e._uU(25," New Column (Expected Result) "),e.qZA(),e.YNc(26,fe,9,1,"div",15),e.qZA(),e.TgZ(27,"button",16),e._uU(28," Add "),e._UZ(29,"i",17),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let i,r;e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file||null!=(i=n.form.get("imageFile"))&&i.value)),e.xp6(1),e.Q6J("ngIf",null==n.imageFile?null:n.imageFile.file),e.xp6(1),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file)&&(null==(r=n.form.get("imageFile"))?null:r.value)),e.xp6(5),e.ekj("invalid",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(2),e.ekj("invalid",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(4),e.Q6J("ngForOf",n.rows),e.xp6(4),e.Q6J("ngForOf",n.rowsForCols),e.xp6(1),e.ekj("disabled",!n.form.valid||n.actuatorPins.length<1||!n.imageFile.file),e.Q6J("type",n.form.valid&&n.actuatorPins.length>0&&n.imageFile.file?"submit":"button")}},directives:[l._Y,l.JL,l.sg,h.O5,l.Fj,l.JJ,l.u,h.sg,l.EJ,l.wV,l.YN,l.Kr],styles:[""]}),o})();function _e(o,a){if(1&o&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.pin_type," ")}}function Ze(o,a){if(1&o&&(e.TgZ(0,"span",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.column," ")}}function Ce(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"tr"),e.TgZ(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"slice"),e.qZA(),e.TgZ(9,"td"),e.YNc(10,_e,2,1,"span",9),e.qZA(),e.TgZ(11,"td"),e.YNc(12,Ze,2,1,"span",10),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"app-action-buttons",11),e.qZA(),e.qZA(),e.BQk()),2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.actuator.id),e.xp6(2),e.Oqu(t.actuator.name?t.actuator.name:"N/A"),e.xp6(2),e.AsE("",e.Dn7(8,15,t.actuator.description,0,30)," ",t.actuator.description.length>30?"...":"",""),e.xp6(3),e.Q6J("ngForOf",t.pinTypes),e.xp6(2),e.Q6J("ngForOf",t.columns),e.xp6(2),e.Q6J("headingDelete","Delete Actuator: "+t.actuator.name)("headingEdit","Edit Actuator: "+t.actuator.name)("headingView","View Actuator: "+t.actuator.name)("modalEditContent",n.modalEditComponent)("modalDeleteContent",n.modalDeleteComponent)("modalViewContent",n.modalViewComponent)("modalViewSize","lg")("modalEditSize","lg")("data",t)}}function Te(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,Ce,15,19,"ng-container",8),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data)}}function be(o,a){1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"th",14),e._uU(3,"No data found."),e.qZA(),e.qZA(),e.qZA())}let ve=(()=>{class o{constructor(t){this.actuators=t,this.dtOptions={},this.data=[],this.actuatorPinTypes=[],this.cols=["id","email","role_name"],this.modalComponent=he,this.modalViewComponent=ae.M,this.modalEditComponent=le,this.modalDeleteComponent=$}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(t,n)=>{this.actuators.getActuators(t).then(i=>{this.data=i.data,n({recordsTotal:i.recordsTotal,recordsFiltered:i.recordsFiltered,data:[]})})},columns:[{data:"id"},{data:"name"},{data:"description"},{data:"pin_types",orderable:!1},{data:"number_of_pins",orderable:!1},{data:"",orderable:!1}],responsive:!0},this.getActuatorPinTypes()}getActuatorPinTypes(){this.actuators.getActuatorPinTypes().then(t=>{t.error||(this.actuatorPinTypes=t.data)})}sumPins(t){return t.reduce((n,i)=>n+i.pin_count,0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(P.G))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-config-actuators"]],decls:22,vars:10,consts:[["modalRef","newModal",3,"exportOptions","newButton","newButtonName","modalContent","modalSize","dataArray","colsArray"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","badge bg-dark mx-1",4,"ngFor","ngForOf"],["class","badge bg-info mx-1",4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","modalDeleteContent","modalViewContent","modalViewSize","modalEditSize","data"],[1,"badge","bg-dark","mx-1"],[1,"badge","bg-info","mx-1"],["colspan","3"]],template:function(t,n){1&t&&(e._UZ(0,"app-top-bar",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2,3),e.TgZ(4,"div",4),e.TgZ(5,"table",5),e.TgZ(6,"thead",6),e.TgZ(7,"tr"),e.TgZ(8,"th"),e._uU(9,"ID"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Name"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Pins Used"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Total Pins"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Actions"),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,Te,2,1,"tbody",7),e.YNc(21,be,4,0,"tbody",7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("exportOptions",!0)("newButton",!0)("newButtonName","New Actuator")("modalContent",n.modalComponent)("modalSize","lg")("dataArray",n.data)("colsArray",n.cols),e.xp6(5),e.Q6J("dtOptions",n.dtOptions),e.xp6(15),e.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),e.xp6(1),e.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[U.N,x.G,h.O5,h.sg,J.O],pipes:[h.OU],styles:[""]}),o})();var S=f(7896);let we=(()=>{class o{constructor(t,n,i,r){this.modal=t,this.sensorService=n,this.loader=i,this.dataIn=r,this.form=new l.cw({sensorId:new l.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("sensorId",new l.NI(this.data.sensor.id)))}get sensorId(){return this.form.get("sensorId")}onSubmit(){var t;this.sensorService.deleteSensor(null===(t=this.sensorId)||void 0===t?void 0:t.value).then(n=>{n.error||(this.modal.close(),this.loader.refresh())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(S.n),e.Y36(T.D),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete-config-sensors"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1," Delete this sensor?"),e._UZ(2,"br"),e._UZ(3,"br"),e._uU(4," All users who have linked this sensor will be invalidated from the system! Proceed with caution.\n"),e.qZA(),e.TgZ(5,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"button",1),e._uU(7," Delete "),e._UZ(8,"i",2),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.form),e.xp6(1),e.ekj("disabled",n.form.invalid),e.Q6J("type",n.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg],styles:[""]}),o})();function ye(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Upload Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.config.preferences.imageSelectorSensor,e.LSH)}}function Ae(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.imageFile?null:t.imageFile.link,e.LSH)}}function Ne(o,a){if(1&o&&(e.TgZ(0,"label",21),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.api.storageHost+t.data.sensor.image_url,e.LSH)}}function xe(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.name||null==t.name.errors?null:t.name.errors.message)}}function qe(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.description||null==t.description.errors?null:t.description.errors.message)}}function Fe(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type)}}function Ue(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",24),e.TgZ(2,"div",7),e.TgZ(3,"select",25),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.YNc(4,Fe,2,2,"option",26),e.qZA(),e.TgZ(5,"label",27),e._uU(6,"Pin Type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e.TgZ(8,"div",7),e.TgZ(9,"input",29),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(10,"label",30),e._uU(11,"Pin Number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",24),e.TgZ(13,"div",7),e.TgZ(14,"input",31),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(15,"label",32),e._uU(16,"Remarks"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",33),e.TgZ(18,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removePin(r)}),e._UZ(19,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index,n=e.oxw();e.xp6(3),e.Q6J("formControlName","floatingpinType"+t),e.xp6(1),e.Q6J("ngForOf",n.pinTypes),e.xp6(5),e.Q6J("formControlName","floatingpinNumber"+t),e.xp6(5),e.Q6J("formControlName","floatingremarks"+t)}}function Je(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",37),e.TgZ(2,"div",7),e.TgZ(3,"input",38),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRowForCols(r,"floatingcolumn"+r)}),e.qZA(),e.TgZ(4,"label",39),e._uU(5,"Column (Expected Result)"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",33),e.TgZ(7,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removeColumn(r)}),e._UZ(8,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index;e.xp6(3),e.Q6J("formControlName","floatingcolumn"+t)}}let Pe=(()=>{class o{constructor(t,n,i,r,s,d,m,_,u){this.modal=t,this.sensorService=n,this.pinType=i,this.loader=r,this.fn=s,this.alert=d,this.api=m,this.config=_,this.dataIn=u,this.imageFile={link:"",file:void 0,name:""},this.pinTypes=[],this.sensorPins=[],this.rows=[],this.columns=[],this.rowsForCols=[],this.form=new l.cw({name:new l.NI("",[Z.b.required]),description:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var g,p;const c=new FormData;c.append("id",this.data.sensor.id),c.append("imageUrl",this.imageFile.file),c.append("sensorPins",JSON.stringify(this.sensorPins)),c.append("columns",JSON.stringify(this.columns)),c.append("name",null===(g=this.name)||void 0===g?void 0:g.value),c.append("description",null===(p=this.description)||void 0===p?void 0:p.value),this.sensorService.newSensor(c).then(F=>{F.error||(this.modal.close(),this.loader.refresh())})}}get name(){return this.form.get("name")}get description(){return this.form.get("description")}ngOnInit(){this.getPinTypes(),this.dataIn&&(this.data=this.dataIn,this.form.setControl("name",new l.NI(this.data.sensor.name,[Z.b.required])),this.form.setControl("description",new l.NI(this.data.sensor.description,[Z.b.required])),this.data.pins.forEach(()=>this.addPin()),this.data.columns.forEach(()=>this.addColumn()),this.rows.length==this.data.pins.length&&this.loadRows(),this.rowsForCols.length==this.data.columns.length&&this.loadRowsForCols())}addPin(){this.form.setControl("floatingpinType"+this.rows.length,new l.NI(1)),this.form.setControl("floatingpinNumber"+this.rows.length,new l.NI("")),this.form.setControl("floatingremarks"+this.rows.length,new l.NI("")),this.rows.push(Math.random())}removePin(t){this.sensorPins=this.sensorPins.filter((n,i)=>i!=t),this.rows=this.rows.filter((n,i)=>i!=t)}addRow(t,n,i,r){var s,d,m;const _=null===(s=this.form.get(n))||void 0===s?void 0:s.value,u=null===(d=this.form.get(i))||void 0===d?void 0:d.value,g=null===(m=this.form.get(r))||void 0===m?void 0:m.value;this.sensorPins=this.sensorPins.filter(p=>p.id!=t),this.sensorPins.push({id:t,pinType:_,pinNumber:u,remarks:g})}loadRows(){this.data.pins.forEach((t,n)=>{var i,r,s;null===(i=this.form.get("floatingpinType"+n))||void 0===i||i.setValue(t.pin_type_id),null===(r=this.form.get("floatingpinNumber"+n))||void 0===r||r.setValue(t.pin_number),null===(s=this.form.get("floatingremarks"+n))||void 0===s||s.setValue(t.remarks),this.sensorPins.push({id:n,pinType:t.pin_type_id,pinNumber:t.pin_number,remarks:t.remarks})})}addColumn(){this.form.setControl("floatingcolumn"+this.rowsForCols.length,new l.NI("")),this.rowsForCols.push(Math.random())}removeColumn(t){this.columns=this.columns.filter((n,i)=>i!=t),this.rowsForCols=this.rowsForCols.filter((n,i)=>i!=t)}addRowForCols(t,n){var i;const r=null===(i=this.form.get(n))||void 0===i?void 0:i.value;this.columns=this.columns.filter(s=>s.id!=t),this.columns.push({id:t,column:r})}loadRowsForCols(){this.data.columns.forEach((t,n)=>{var i;null===(i=this.form.get("floatingcolumn"+n))||void 0===i||i.setValue(t.column),this.columns.push({id:n,column:t.column})})}getPinTypes(){return this.pinType.getPinTypesUnfiltered().then(t=>{t.error||(this.pinTypes=t.data)})}imagesPreview(t){if(t.target.files&&t.target.files[0]){let n=t.target.files[0].type.split("/").pop().toLowerCase(),i=t.target.files[0].size;if("jpeg"==n||"jpg"==n||"png"==n||"bmp"==n||"gif"==n||"svg"==n||"svg+xml"==n)if(i<1e6){const r=new FileReader;r.onload=s=>{this.imageFile={link:s.target.result,file:t.srcElement.files[0],name:t.srcElement.files[0].name}},r.readAsDataURL(t.target.files[0])}else this.alert.showError("Logo should not exceed 1MB in size!");else this.alert.showError("Only Images are Allowed!")}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(S.n),e.Y36(b),e.Y36(T.D),e.Y36(w.d),e.Y36(A.c),e.Y36(y.s),e.Y36(N._),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-config-sensors"]],decls:30,vars:15,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"p-2","row"],[1,"col-md-4"],["for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["for","imageFile","for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["type","file","id","imageFile",2,"display","none",3,"change"],[1,"col-md-8","table-responsive"],[1,"form-floating","mb-3"],["formControlName","name","name","text","id","floatingname","placeholder","Name",1,"form-control"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","description","description","text","id","floatingdescription","placeholder","Description",1,"form-control",2,"height","200px"],["for","floatingdescription"],["type","button",1,"btn","btn-danger","float-right","mb-3",3,"click"],[1,"bi","bi-node-plus-fill"],["class","row clear-both",4,"ngFor","ngForOf"],[1,"w-100","btn","btn-primary",3,"type"],[1,"bi","bi-check-circle-fill"],["for","imageFile",1,"text-right","w-100","pointer"],[1,"preview-image",3,"src"],[1,"mt-4","image-label","text-center","font-weight-900"],["for","imageFile","for","imageFile",1,"text-right","w-100","pointer"],[1,"text-danger","font-weight-bold","p-0","m-0"],[1,"row","clear-both"],[1,"col","col-md-4"],["id","state",1,"form-control",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],["for","state",1,"my-1","me-2"],[1,"col","col-md-3"],["type","number","placeholder","Pin Number",1,"form-control",3,"formControlName","change"],["for","floatingpinNumber"],["type","text","placeholder","Remarks",1,"form-control",3,"formControlName","change"],["for","floatingremarks"],[1,"col","col-md-1","col-lg-1"],[1,"mb-3","rounded","bg-danger","pointer",2,"height","55px !important",3,"click"],[1,"bi","bi-dash","text-white",2,"position","relative","top","15px","left","7px"],[3,"value"],[1,"col","col-md-11","col-lg-11"],["type","text","placeholder","Column (Expected Result)",1,"form-control",3,"formControlName","change"],["for","floatingcolumn"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,ye,5,1,"label",3),e.YNc(4,Ae,5,1,"label",3),e.YNc(5,Ne,5,1,"label",4),e.TgZ(6,"input",5),e.NdJ("change",function(r){return n.imagesPreview(r)}),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div"),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"Name"),e.qZA(),e.YNc(13,xe,2,1,"p",10),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"textarea",11),e.TgZ(16,"label",12),e._uU(17,"Description"),e.qZA(),e.YNc(18,qe,2,1,"p",10),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return n.addPin()}),e._UZ(20,"i",14),e._uU(21," New Pin "),e.qZA(),e.YNc(22,Ue,20,4,"div",15),e.TgZ(23,"button",13),e.NdJ("click",function(){return n.addColumn()}),e._UZ(24,"i",14),e._uU(25," New Column (Expected Result) "),e.qZA(),e.YNc(26,Je,9,1,"div",15),e.qZA(),e.TgZ(27,"button",16),e._uU(28," Update "),e._UZ(29,"i",17),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file||n.data.sensor.image_url)),e.xp6(1),e.Q6J("ngIf",null==n.imageFile?null:n.imageFile.file),e.xp6(1),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file)&&n.data.sensor.image_url),e.xp6(5),e.ekj("invalid",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(2),e.ekj("invalid",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(4),e.Q6J("ngForOf",n.rows),e.xp6(4),e.Q6J("ngForOf",n.rowsForCols),e.xp6(1),e.ekj("disabled",!n.form.valid||n.sensorPins.length<1),e.Q6J("type",n.form.valid&&n.sensorPins.length>0?"submit":"button"))},directives:[l._Y,l.JL,l.sg,h.O5,l.Fj,l.JJ,l.u,h.sg,l.EJ,l.wV,l.YN,l.Kr],styles:[""]}),o})();var Se=f(4249);function Ie(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Upload Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.config.preferences.imageSelectorSensor,e.LSH)}}function ke(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.imageFile?null:t.imageFile.link,e.LSH)}}function Ee(o,a){if(1&o&&(e.TgZ(0,"label",21),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("src",t.api.storageHost+(null==(n=t.form.get("imageFile"))?null:n.value),e.LSH)}}function Ye(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.name||null==t.name.errors?null:t.name.errors.message)}}function Oe(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.description||null==t.description.errors?null:t.description.errors.message)}}function Qe(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type)}}function De(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",24),e.TgZ(2,"div",7),e.TgZ(3,"select",25),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.YNc(4,Qe,2,2,"option",26),e.qZA(),e.TgZ(5,"label",27),e._uU(6,"Pin Type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e.TgZ(8,"div",7),e.TgZ(9,"input",29),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(10,"label",30),e._uU(11,"Pin Number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",24),e.TgZ(13,"div",7),e.TgZ(14,"input",31),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(15,"label",32),e._uU(16,"Remarks"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",33),e.TgZ(18,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removePin(r)}),e._UZ(19,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index,n=e.oxw();e.xp6(3),e.Q6J("formControlName","floatingpinType"+t),e.xp6(1),e.Q6J("ngForOf",n.pinTypes),e.xp6(5),e.Q6J("formControlName","floatingpinNumber"+t),e.xp6(5),e.Q6J("formControlName","floatingremarks"+t)}}function Be(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",37),e.TgZ(2,"div",7),e.TgZ(3,"input",38),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRowForCols(r,"floatingcolumn"+r)}),e.qZA(),e.TgZ(4,"label",39),e._uU(5,"Column (Expected Result)"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",33),e.TgZ(7,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removeColumn(r)}),e._UZ(8,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index;e.xp6(3),e.Q6J("formControlName","floatingcolumn"+t)}}let Re=(()=>{class o{constructor(t,n,i,r,s,d,m,_){this.modal=t,this.sensorService=n,this.pinType=i,this.loader=r,this.fn=s,this.alert=d,this.api=m,this.config=_,this.imageFile={link:"",file:void 0,name:""},this.pinTypes=[],this.sensorPins=[],this.rows=[],this.columns=[],this.rowsForCols=[],this.form=new l.cw({name:new l.NI("",[Z.b.required]),description:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var u,g;const p=new FormData;p.append("imageUrl",this.imageFile.file),p.append("sensorPins",JSON.stringify(this.sensorPins)),p.append("columns",JSON.stringify(this.columns)),p.append("name",null===(u=this.name)||void 0===u?void 0:u.value),p.append("description",null===(g=this.description)||void 0===g?void 0:g.value),this.sensorService.newSensor(p).then(c=>{c.error||(this.modal.close(),this.loader.refresh())})}}get name(){return this.form.get("name")}get description(){return this.form.get("description")}ngOnInit(){this.getPinTypes(),this.addPin(),this.addColumn()}addPin(){this.form.setControl("floatingpinType"+this.rows.length,new l.NI(1)),this.form.setControl("floatingpinNumber"+this.rows.length,new l.NI("")),this.form.setControl("floatingremarks"+this.rows.length,new l.NI("")),this.rows.push(Math.random())}removePin(t){this.sensorPins=this.sensorPins.filter((n,i)=>i!=t),this.rows=this.rows.filter((n,i)=>i!=t)}addRow(t,n,i,r){var s,d,m;const _=null===(s=this.form.get(n))||void 0===s?void 0:s.value,u=null===(d=this.form.get(i))||void 0===d?void 0:d.value,g=null===(m=this.form.get(r))||void 0===m?void 0:m.value;this.sensorPins=this.sensorPins.filter(p=>p.id!=t),this.sensorPins.push({id:t,pinType:_,pinNumber:u,remarks:g})}addColumn(){this.form.setControl("floatingcolumn"+this.rowsForCols.length,new l.NI("")),this.rowsForCols.push(Math.random())}removeColumn(t){this.columns=this.columns.filter((n,i)=>i!=t),this.rowsForCols=this.rowsForCols.filter((n,i)=>i!=t)}addRowForCols(t,n){var i;const r=null===(i=this.form.get(n))||void 0===i?void 0:i.value;this.columns=this.columns.filter(s=>s.id!=t),this.columns.push({id:t,column:r})}getPinTypes(){return this.pinType.getPinTypesUnfiltered().then(t=>{t.error||(this.pinTypes=t.data)})}imagesPreview(t){if(t.target.files&&t.target.files[0]){let n=t.target.files[0].type.split("/").pop().toLowerCase(),i=t.target.files[0].size;if("jpeg"==n||"jpg"==n||"png"==n||"bmp"==n||"gif"==n||"svg"==n||"svg+xml"==n)if(i<1e6){const r=new FileReader;r.onload=s=>{this.imageFile={link:s.target.result,file:t.srcElement.files[0],name:t.srcElement.files[0].name}},r.readAsDataURL(t.target.files[0])}else this.alert.showError("Logo should not exceed 1MB in size!");else this.alert.showError("Only Images are Allowed!")}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(S.n),e.Y36(b),e.Y36(T.D),e.Y36(w.d),e.Y36(A.c),e.Y36(y.s),e.Y36(N._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-new-config-sensors"]],decls:30,vars:15,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"p-2","row"],[1,"col-md-4"],["for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["for","imageFile","for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["type","file","id","imageFile",2,"display","none",3,"change"],[1,"col-md-8"],[1,"form-floating","mb-3"],["formControlName","name","name","text","id","floatingname","placeholder","Name",1,"form-control"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","description","description","text","id","floatingdescription","placeholder","Description",1,"form-control",2,"height","200px"],["for","floatingdescription"],["type","button",1,"btn","btn-danger","float-right","mb-3",3,"click"],[1,"bi","bi-node-plus-fill"],["class","row clear-both",4,"ngFor","ngForOf"],[1,"w-100","btn","btn-primary",3,"type"],[1,"bi","bi-file-earmark-plus-fill"],["for","imageFile",1,"text-right","w-100","pointer"],[1,"preview-image",3,"src"],[1,"mt-4","image-label","text-center","font-weight-900"],["for","imageFile","for","imageFile",1,"text-right","w-100","pointer"],[1,"text-danger","font-weight-bold","p-0","m-0"],[1,"row","clear-both"],[1,"col","col-md-4","col-lg-4"],["id","state",1,"form-control",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],["for","state",1,"my-1","me-2"],[1,"col","col-md-3","col-lg-3"],["type","number","placeholder","Pin Number",1,"form-control",3,"formControlName","change"],["for","floatingpinNumber"],["type","text","placeholder","Remarks",1,"form-control",3,"formControlName","change"],["for","floatingremarks"],[1,"col","col-md-1","col-lg-1"],[1,"mb-3","rounded","bg-danger","pointer",2,"height","55px !important",3,"click"],[1,"bi","bi-dash","text-white",2,"position","relative","top","15px","left","7px"],[3,"value"],[1,"col","col-md-11","col-lg-11"],["type","text","placeholder","Column (Expected Result)",1,"form-control",3,"formControlName","change"],["for","floatingcolumn"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Ie,5,1,"label",3),e.YNc(4,ke,5,1,"label",3),e.YNc(5,Ee,5,1,"label",4),e.TgZ(6,"input",5),e.NdJ("change",function(r){return n.imagesPreview(r)}),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div"),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"Name"),e.qZA(),e.YNc(13,Ye,2,1,"p",10),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"textarea",11),e.TgZ(16,"label",12),e._uU(17,"Description"),e.qZA(),e.YNc(18,Oe,2,1,"p",10),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return n.addPin()}),e._UZ(20,"i",14),e._uU(21," New Pin "),e.qZA(),e.YNc(22,De,20,4,"div",15),e.TgZ(23,"button",13),e.NdJ("click",function(){return n.addColumn()}),e._UZ(24,"i",14),e._uU(25," New Column (Expected Result) "),e.qZA(),e.YNc(26,Be,9,1,"div",15),e.qZA(),e.TgZ(27,"button",16),e._uU(28," Add "),e._UZ(29,"i",17),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let i,r;e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file||null!=(i=n.form.get("imageFile"))&&i.value)),e.xp6(1),e.Q6J("ngIf",null==n.imageFile?null:n.imageFile.file),e.xp6(1),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file)&&(null==(r=n.form.get("imageFile"))?null:r.value)),e.xp6(5),e.ekj("invalid",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(2),e.ekj("invalid",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(4),e.Q6J("ngForOf",n.rows),e.xp6(4),e.Q6J("ngForOf",n.rowsForCols),e.xp6(1),e.ekj("disabled",!n.form.valid||n.sensorPins.length<1||!n.imageFile.file),e.Q6J("type",n.form.valid&&n.sensorPins.length>0&&n.imageFile.file?"submit":"button")}},directives:[l._Y,l.JL,l.sg,h.O5,l.Fj,l.JJ,l.u,h.sg,l.EJ,l.wV,l.YN,l.Kr],styles:[""]}),o})();function He(o,a){if(1&o&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.pin_type," ")}}function Me(o,a){if(1&o&&(e.TgZ(0,"span",13),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.column," ")}}function je(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"tr"),e.TgZ(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"slice"),e.qZA(),e.TgZ(9,"td"),e.YNc(10,He,2,1,"span",9),e.qZA(),e.TgZ(11,"td"),e.YNc(12,Me,2,1,"span",10),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"app-action-buttons",11),e.qZA(),e.qZA(),e.BQk()),2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.sensor.id),e.xp6(2),e.Oqu(t.sensor.name?t.sensor.name:"N/A"),e.xp6(2),e.AsE("",e.Dn7(8,15,t.sensor.description,0,30)," ",t.sensor.description.length>30?"...":"",""),e.xp6(3),e.Q6J("ngForOf",t.pinTypes),e.xp6(2),e.Q6J("ngForOf",t.columns),e.xp6(2),e.Q6J("headingDelete","Delete Sensor: "+t.sensor.name)("headingEdit","Edit Sensor: "+t.sensor.name)("headingView","View Sensor: "+t.sensor.name)("modalEditContent",n.modalEditComponent)("modalDeleteContent",n.modalDeleteComponent)("modalViewContent",n.modalViewComponent)("modalViewSize","lg")("modalEditSize","lg")("data",t)}}function Le(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,je,15,19,"ng-container",8),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data)}}function Ve(o,a){1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"th",14),e._uU(3,"No data found."),e.qZA(),e.qZA(),e.qZA())}let ze=(()=>{class o{constructor(t){this.sensors=t,this.dtOptions={},this.data=[],this.sensorPinTypes=[],this.cols=["id","email","role_name"],this.modalComponent=Re,this.modalViewComponent=Se.k,this.modalEditComponent=Pe,this.modalDeleteComponent=we}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(t,n)=>{this.sensors.getSensors(t).then(i=>{this.data=i.data,n({recordsTotal:i.recordsTotal,recordsFiltered:i.recordsFiltered,data:[]})})},columns:[{data:"id"},{data:"name"},{data:"description"},{data:"pin_types",orderable:!1},{data:"number_of_pins",orderable:!1},{data:"",orderable:!1}],responsive:!0},this.getSensorPinTypes()}getSensorPinTypes(){this.sensors.getSensorPinTypes().then(t=>{t.error||(this.sensorPinTypes=t.data)})}sumPins(t){return t.reduce((n,i)=>n+i.pin_count,0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S.n))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-config-sensors"]],decls:22,vars:10,consts:[["modalRef","newModal",3,"exportOptions","newButton","newButtonName","modalContent","modalSize","dataArray","colsArray"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","badge bg-dark mx-1",4,"ngFor","ngForOf"],["class","badge bg-info mx-1",4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","modalDeleteContent","modalViewContent","modalViewSize","modalEditSize","data"],[1,"badge","bg-dark","mx-1"],[1,"badge","bg-info","mx-1"],["colspan","3"]],template:function(t,n){1&t&&(e._UZ(0,"app-top-bar",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2,3),e.TgZ(4,"div",4),e.TgZ(5,"table",5),e.TgZ(6,"thead",6),e.TgZ(7,"tr"),e.TgZ(8,"th"),e._uU(9,"ID"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Name"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Pins Used"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Expected Result"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Actions"),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,Le,2,1,"tbody",7),e.YNc(21,Ve,4,0,"tbody",7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("exportOptions",!0)("newButton",!0)("newButtonName","New Sensor")("modalContent",n.modalComponent)("modalSize","lg")("dataArray",n.data)("colsArray",n.cols),e.xp6(5),e.Q6J("dtOptions",n.dtOptions),e.xp6(15),e.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),e.xp6(1),e.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[U.N,x.G,h.O5,h.sg,J.O],pipes:[h.OU],styles:[""]}),o})();var I=f(2695);let Ge=(()=>{class o{constructor(t,n,i,r){this.modal=t,this.boardService=n,this.loader=i,this.dataIn=r,this.form=new l.cw({boardId:new l.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("boardId",new l.NI(this.data.board.id)))}get boardId(){return this.form.get("boardId")}onSubmit(){var t;this.boardService.deleteBoard(null===(t=this.boardId)||void 0===t?void 0:t.value).then(n=>{n.error||(this.modal.close(),this.loader.refresh())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(I.E),e.Y36(T.D),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete-config-boards"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1," Delete this board?"),e._UZ(2,"br"),e._UZ(3,"br"),e._uU(4," All users who have linked this board will be invalidated from the system! Proceed with caution.\n"),e.qZA(),e.TgZ(5,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"button",1),e._uU(7," Delete "),e._UZ(8,"i",2),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.form),e.xp6(1),e.ekj("disabled",n.form.invalid),e.Q6J("type",n.form.valid?"submit":"button"))},directives:[l._Y,l.JL,l.sg],styles:[""]}),o})();function Xe(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Upload Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.config.preferences.imageSelectorBoard,e.LSH)}}function $e(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.imageFile?null:t.imageFile.link,e.LSH)}}function Ke(o,a){if(1&o&&(e.TgZ(0,"label",21),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.api.storageHost+t.data.board.image_url,e.LSH)}}function We(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.name||null==t.name.errors?null:t.name.errors.message)}}function et(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.description||null==t.description.errors?null:t.description.errors.message)}}function tt(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type)}}function nt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",24),e.TgZ(2,"div",7),e.TgZ(3,"select",25),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.YNc(4,tt,2,2,"option",26),e.qZA(),e.TgZ(5,"label",27),e._uU(6,"Pin Type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e.TgZ(8,"div",7),e.TgZ(9,"input",29),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(10,"label",30),e._uU(11,"Pin Number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",24),e.TgZ(13,"div",7),e.TgZ(14,"input",31),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(15,"label",32),e._uU(16,"Remarks"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",33),e.TgZ(18,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removePin(r)}),e._UZ(19,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index,n=e.oxw();e.xp6(3),e.Q6J("formControlName","floatingpinType"+t),e.xp6(1),e.Q6J("ngForOf",n.pinTypes),e.xp6(5),e.Q6J("formControlName","floatingpinNumber"+t),e.xp6(5),e.Q6J("formControlName","floatingremarks"+t)}}let ot=(()=>{class o{constructor(t,n,i,r,s,d,m,_,u){this.modal=t,this.boardService=n,this.pinType=i,this.loader=r,this.fn=s,this.alert=d,this.api=m,this.config=_,this.dataIn=u,this.imageFile={link:"",file:void 0,name:""},this.pinTypes=[],this.boardPins=[],this.rows=[],this.form=new l.cw({name:new l.NI("",[Z.b.required]),description:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var g,p;const c=new FormData;c.append("id",this.data.board.id),c.append("imageUrl",this.imageFile.file),c.append("boardPins",JSON.stringify(this.boardPins)),c.append("name",null===(g=this.name)||void 0===g?void 0:g.value),c.append("description",null===(p=this.description)||void 0===p?void 0:p.value),this.boardService.newBoard(c).then(F=>{F.error||(this.modal.close(),this.loader.refresh())})}}get name(){return this.form.get("name")}get description(){return this.form.get("description")}ngOnInit(){this.getPinTypes(),this.dataIn&&(this.data=this.dataIn,this.form.setControl("name",new l.NI(this.data.board.name,[Z.b.required])),this.form.setControl("description",new l.NI(this.data.board.description,[Z.b.required])),this.data.pins.forEach(()=>this.addPin()),this.rows.length==this.data.pins.length&&this.loadRows())}addPin(){this.form.setControl("floatingpinType"+this.rows.length,new l.NI(1)),this.form.setControl("floatingpinNumber"+this.rows.length,new l.NI("")),this.form.setControl("floatingremarks"+this.rows.length,new l.NI("")),this.rows.push(Math.random())}removePin(t){this.boardPins=this.boardPins.filter((n,i)=>i!=t),this.rows=this.rows.filter((n,i)=>i!=t)}addRow(t,n,i,r){var s,d,m;const _=null===(s=this.form.get(n))||void 0===s?void 0:s.value,u=null===(d=this.form.get(i))||void 0===d?void 0:d.value,g=null===(m=this.form.get(r))||void 0===m?void 0:m.value;this.boardPins=this.boardPins.filter(p=>p.id!=t),this.boardPins.push({id:t,pinType:_,pinNumber:u,remarks:g})}loadRows(){this.data.pins.forEach((t,n)=>{var i,r,s;null===(i=this.form.get("floatingpinType"+n))||void 0===i||i.setValue(t.pin_type_id),null===(r=this.form.get("floatingpinNumber"+n))||void 0===r||r.setValue(t.pin_number),null===(s=this.form.get("floatingremarks"+n))||void 0===s||s.setValue(t.remarks),this.boardPins=this.boardPins.filter(d=>d.id!=n),this.boardPins.push({id:n,pinType:t.pin_type_id,pinNumber:t.pin_number,remarks:t.remarks})})}getPinTypes(){return this.pinType.getPinTypesUnfiltered().then(t=>{t.error||(this.pinTypes=t.data)})}imagesPreview(t){if(t.target.files&&t.target.files[0]){let n=t.target.files[0].type.split("/").pop().toLowerCase(),i=t.target.files[0].size;if("jpeg"==n||"jpg"==n||"png"==n||"bmp"==n||"gif"==n||"svg"==n||"svg+xml"==n)if(i<1e6){const r=new FileReader;r.onload=s=>{this.imageFile={link:s.target.result,file:t.srcElement.files[0],name:t.srcElement.files[0].name}},r.readAsDataURL(t.target.files[0])}else this.alert.showError("Logo should not exceed 1MB in size!");else this.alert.showError("Only Images are Allowed!")}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(I.E),e.Y36(b),e.Y36(T.D),e.Y36(w.d),e.Y36(A.c),e.Y36(y.s),e.Y36(N._),e.Y36(v.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-config-boards"]],decls:26,vars:14,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"p-2","row"],[1,"col-md-4"],["for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["for","imageFile","for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["type","file","id","imageFile",2,"display","none",3,"change"],[1,"col-md-8","table-responsive"],[1,"form-floating","mb-3"],["formControlName","name","name","text","id","floatingname","placeholder","Name",1,"form-control"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","description","description","text","id","floatingdescription","placeholder","Description",1,"form-control",2,"height","200px"],["for","floatingdescription"],["type","button",1,"btn","btn-danger","float-right","mb-3",3,"click"],[1,"bi","bi-node-plus-fill"],["class","row clear-both",4,"ngFor","ngForOf"],[1,"w-100","btn","btn-primary",3,"type"],[1,"bi","bi-check-circle-fill"],["for","imageFile",1,"text-right","w-100","pointer"],[1,"preview-image",3,"src"],[1,"mt-4","image-label","text-center","font-weight-900"],["for","imageFile","for","imageFile",1,"text-right","w-100","pointer"],[1,"text-danger","font-weight-bold","p-0","m-0"],[1,"row","clear-both"],[1,"col","col-md-4"],["id","state",1,"form-control",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],["for","state",1,"my-1","me-2"],[1,"col","col-md-3"],["type","number","placeholder","Pin Number",1,"form-control",3,"formControlName","change"],["for","floatingpinNumber"],["type","text","placeholder","Remarks",1,"form-control",3,"formControlName","change"],["for","floatingremarks"],[1,"col","col-md-1","col-lg-1"],[1,"mb-3","rounded","bg-danger","pointer",2,"height","55px !important",3,"click"],[1,"bi","bi-dash","text-white",2,"position","relative","top","15px","left","7px"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Xe,5,1,"label",3),e.YNc(4,$e,5,1,"label",3),e.YNc(5,Ke,5,1,"label",4),e.TgZ(6,"input",5),e.NdJ("change",function(r){return n.imagesPreview(r)}),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div"),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"Name"),e.qZA(),e.YNc(13,We,2,1,"p",10),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"textarea",11),e.TgZ(16,"label",12),e._uU(17,"Description"),e.qZA(),e.YNc(18,et,2,1,"p",10),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return n.addPin()}),e._UZ(20,"i",14),e._uU(21," New Pin "),e.qZA(),e.YNc(22,nt,20,4,"div",15),e.qZA(),e.TgZ(23,"button",16),e._uU(24," Update "),e._UZ(25,"i",17),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file||n.data.board.image_url)),e.xp6(1),e.Q6J("ngIf",null==n.imageFile?null:n.imageFile.file),e.xp6(1),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file)&&n.data.board.image_url),e.xp6(5),e.ekj("invalid",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(2),e.ekj("invalid",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(4),e.Q6J("ngForOf",n.rows),e.xp6(1),e.ekj("disabled",!n.form.valid||n.boardPins.length<3),e.Q6J("type",n.form.valid&&n.boardPins.length>2?"submit":"button"))},directives:[l._Y,l.JL,l.sg,h.O5,l.Fj,l.JJ,l.u,h.sg,l.EJ,l.wV,l.YN,l.Kr],styles:[""]}),o})();var it=f(2761);function rt(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Upload Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.config.preferences.imageSelectorBoard,e.LSH)}}function lt(o,a){if(1&o&&(e.TgZ(0,"label",18),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.imageFile?null:t.imageFile.link,e.LSH)}}function at(o,a){if(1&o&&(e.TgZ(0,"label",21),e._UZ(1,"img",19),e._UZ(2,"br"),e.TgZ(3,"h4",20),e._uU(4," Click to Change Image "),e.qZA(),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("src",t.api.storageHost+(null==(n=t.form.get("imageFile"))?null:n.value),e.LSH)}}function st(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.name||null==t.name.errors?null:t.name.errors.message)}}function dt(o,a){if(1&o&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.description||null==t.description.errors?null:t.description.errors.message)}}function pt(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type)}}function mt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",24),e.TgZ(2,"div",7),e.TgZ(3,"select",25),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.YNc(4,pt,2,2,"option",26),e.qZA(),e.TgZ(5,"label",27),e._uU(6,"Pin Type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e.TgZ(8,"div",7),e.TgZ(9,"input",29),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(10,"label",30),e._uU(11,"Pin Number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",24),e.TgZ(13,"div",7),e.TgZ(14,"input",31),e.NdJ("change",function(){const r=e.CHM(t).index;return e.oxw().addRow(r,"floatingpinType"+r,"floatingpinNumber"+r,"floatingremarks"+r)}),e.qZA(),e.TgZ(15,"label",32),e._uU(16,"Remarks"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",33),e.TgZ(18,"div",34),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().removePin(r)}),e._UZ(19,"i",35),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.index,n=e.oxw();e.xp6(3),e.Q6J("formControlName","floatingpinType"+t),e.xp6(1),e.Q6J("ngForOf",n.pinTypes),e.xp6(5),e.Q6J("formControlName","floatingpinNumber"+t),e.xp6(5),e.Q6J("formControlName","floatingremarks"+t)}}let gt=(()=>{class o{constructor(t,n,i,r,s,d,m,_){this.modal=t,this.boardService=n,this.pinType=i,this.loader=r,this.fn=s,this.alert=d,this.api=m,this.config=_,this.imageFile={link:"",file:void 0,name:""},this.pinTypes=[],this.boardPins=[],this.rows=[],this.form=new l.cw({name:new l.NI("",[Z.b.required]),description:new l.NI("",[Z.b.required])}),this.onSubmit=()=>{var u,g;const p=new FormData;p.append("imageUrl",this.imageFile.file),p.append("boardPins",JSON.stringify(this.boardPins)),p.append("name",null===(u=this.name)||void 0===u?void 0:u.value),p.append("description",null===(g=this.description)||void 0===g?void 0:g.value),this.boardService.newBoard(p).then(c=>{c.error||(this.modal.close(),this.loader.refresh())})}}get name(){return this.form.get("name")}get description(){return this.form.get("description")}ngOnInit(){this.getPinTypes();for(let t=0;t<3;t++)this.addPin()}addPin(){this.form.setControl("floatingpinType"+this.rows.length,new l.NI(1)),this.form.setControl("floatingpinNumber"+this.rows.length,new l.NI("")),this.form.setControl("floatingremarks"+this.rows.length,new l.NI("")),this.rows.push(Math.random())}removePin(t){this.boardPins=this.boardPins.filter((n,i)=>i!=t),this.rows=this.rows.filter((n,i)=>i!=t)}addRow(t,n,i,r){var s,d,m;const _=null===(s=this.form.get(n))||void 0===s?void 0:s.value,u=null===(d=this.form.get(i))||void 0===d?void 0:d.value,g=null===(m=this.form.get(r))||void 0===m?void 0:m.value;this.boardPins=this.boardPins.filter(p=>p.id!=t),this.boardPins.push({id:t,pinType:_,pinNumber:u,remarks:g})}getPinTypes(){return this.pinType.getPinTypesUnfiltered().then(t=>{t.error||(this.pinTypes=t.data)})}imagesPreview(t){if(t.target.files&&t.target.files[0]){let n=t.target.files[0].type.split("/").pop().toLowerCase(),i=t.target.files[0].size;if("jpeg"==n||"jpg"==n||"png"==n||"bmp"==n||"gif"==n||"svg"==n||"svg+xml"==n)if(i<1e6){const r=new FileReader;r.onload=s=>{this.imageFile={link:s.target.result,file:t.srcElement.files[0],name:t.srcElement.files[0].name}},r.readAsDataURL(t.target.files[0])}else this.alert.showError("Logo should not exceed 1MB in size!");else this.alert.showError("Only Images are Allowed!")}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.F),e.Y36(I.E),e.Y36(b),e.Y36(T.D),e.Y36(w.d),e.Y36(A.c),e.Y36(y.s),e.Y36(N._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-new-config-boards"]],decls:26,vars:14,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"p-2","row"],[1,"col-md-4"],["for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["for","imageFile","for","imageFile","class","text-right w-100 pointer",4,"ngIf"],["type","file","id","imageFile",2,"display","none",3,"change"],[1,"col-md-8"],[1,"form-floating","mb-3"],["formControlName","name","name","text","id","floatingname","placeholder","Name",1,"form-control"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","description","description","text","id","floatingdescription","placeholder","Description",1,"form-control",2,"height","200px"],["for","floatingdescription"],["type","button",1,"btn","btn-danger","float-right","mb-3",3,"click"],[1,"bi","bi-node-plus-fill"],["class","row clear-both",4,"ngFor","ngForOf"],[1,"w-100","btn","btn-primary",3,"type"],[1,"bi","bi-file-earmark-plus-fill"],["for","imageFile",1,"text-right","w-100","pointer"],[1,"preview-image",3,"src"],[1,"mt-4","image-label","text-center","font-weight-900"],["for","imageFile","for","imageFile",1,"text-right","w-100","pointer"],[1,"text-danger","font-weight-bold","p-0","m-0"],[1,"row","clear-both"],[1,"col","col-md-4","col-lg-4"],["id","state",1,"form-control",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],["for","state",1,"my-1","me-2"],[1,"col","col-md-3","col-lg-3"],["type","number","placeholder","Pin Number",1,"form-control",3,"formControlName","change"],["for","floatingpinNumber"],["type","text","placeholder","Remarks",1,"form-control",3,"formControlName","change"],["for","floatingremarks"],[1,"col","col-md-1","col-lg-1"],[1,"mb-3","rounded","bg-danger","pointer",2,"height","55px !important",3,"click"],[1,"bi","bi-dash","text-white",2,"position","relative","top","15px","left","7px"],[3,"value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,rt,5,1,"label",3),e.YNc(4,lt,5,1,"label",3),e.YNc(5,at,5,1,"label",4),e.TgZ(6,"input",5),e.NdJ("change",function(r){return n.imagesPreview(r)}),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div"),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.TgZ(11,"label",9),e._uU(12,"Name"),e.qZA(),e.YNc(13,st,2,1,"p",10),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"textarea",11),e.TgZ(16,"label",12),e._uU(17,"Description"),e.qZA(),e.YNc(18,dt,2,1,"p",10),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return n.addPin()}),e._UZ(20,"i",14),e._uU(21," New Pin "),e.qZA(),e.YNc(22,mt,20,4,"div",15),e.qZA(),e.TgZ(23,"button",16),e._uU(24," Add "),e._UZ(25,"i",17),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let i,r;e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file||null!=(i=n.form.get("imageFile"))&&i.value)),e.xp6(1),e.Q6J("ngIf",null==n.imageFile?null:n.imageFile.file),e.xp6(1),e.Q6J("ngIf",!(null!=n.imageFile&&n.imageFile.file)&&(null==(r=n.form.get("imageFile"))?null:r.value)),e.xp6(5),e.ekj("invalid",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.name?null:n.name.touched)&&(null==n.name?null:n.name.invalid)),e.xp6(2),e.ekj("invalid",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(3),e.Q6J("ngIf",(null==n.description?null:n.description.touched)&&(null==n.description?null:n.description.invalid)),e.xp6(4),e.Q6J("ngForOf",n.rows),e.xp6(1),e.ekj("disabled",!n.form.valid||n.boardPins.length<3||!n.imageFile.file),e.Q6J("type",n.form.valid&&n.boardPins.length>2&&n.imageFile.file?"submit":"button")}},directives:[l._Y,l.JL,l.sg,h.O5,l.Fj,l.JJ,l.u,h.sg,l.EJ,l.wV,l.YN,l.Kr],styles:[""]}),o})();function ut(o,a){if(1&o&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.pin_type," ")}}function ct(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"tr"),e.TgZ(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"slice"),e.qZA(),e.TgZ(9,"td"),e.YNc(10,ut,2,1,"span",9),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"app-action-buttons",10),e.qZA(),e.qZA(),e.BQk()),2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.board.id),e.xp6(2),e.Oqu(t.board.name?t.board.name:"N/A"),e.xp6(2),e.AsE("",e.Dn7(8,15,t.board.description,0,30)," ",t.board.description.length>30?"...":"",""),e.xp6(3),e.Q6J("ngForOf",t.pinTypes),e.xp6(2),e.Oqu(n.sumPins(t.pinTypes)),e.xp6(2),e.Q6J("headingDelete","Delete Board: "+t.board.name)("headingEdit","Edit Board: "+t.board.name)("headingView","View Board: "+t.board.name)("modalEditContent",n.modalEditComponent)("modalDeleteContent",n.modalDeleteComponent)("modalViewContent",n.modalViewComponent)("modalViewSize","lg")("modalEditSize","lg")("data",t)}}function ft(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,ct,15,19,"ng-container",8),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data)}}function ht(o,a){1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"th",12),e._uU(3,"No data found."),e.qZA(),e.qZA(),e.qZA())}let _t=(()=>{class o{constructor(t){this.boards=t,this.dtOptions={},this.data=[],this.boardPinTypes=[],this.cols=["id","email","role_name"],this.modalComponent=gt,this.modalViewComponent=it.Y,this.modalEditComponent=ot,this.modalDeleteComponent=Ge}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0,serverSide:!0,ajax:(t,n)=>{this.boards.getBoards(t).then(i=>{this.data=i.data,n({recordsTotal:i.recordsTotal,recordsFiltered:i.recordsFiltered,data:[]})})},columns:[{data:"id"},{data:"name"},{data:"description"},{data:"pin_types",orderable:!1},{data:"number_of_pins",orderable:!1},{data:"",orderable:!1}],responsive:!0},this.getBoardPinTypes()}getBoardPinTypes(){this.boards.getBoardPinTypes().then(t=>{t.error||(this.boardPinTypes=t.data)})}sumPins(t){return t.reduce((n,i)=>n+i.pin_count,0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(I.E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-config-boards"]],decls:22,vars:10,consts:[["modalRef","newModal",3,"exportOptions","newButton","newButtonName","modalContent","modalSize","dataArray","colsArray"],[1,"card"],["id","htmlData",1,"table-responsive","py-4"],["htmlData",""],[1,"dataTable-wrapper","dataTable-loading","no-footer","fixed-columns"],["datatable","","id","htmlData",1,"table","table-flush","dataTable-table",3,"dtOptions"],[1,"thead-light"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","badge bg-dark mx-1",4,"ngFor","ngForOf"],[3,"headingDelete","headingEdit","headingView","modalEditContent","modalDeleteContent","modalViewContent","modalViewSize","modalEditSize","data"],[1,"badge","bg-dark","mx-1"],["colspan","3"]],template:function(t,n){1&t&&(e._UZ(0,"app-top-bar",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2,3),e.TgZ(4,"div",4),e.TgZ(5,"table",5),e.TgZ(6,"thead",6),e.TgZ(7,"tr"),e.TgZ(8,"th"),e._uU(9,"ID"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Name"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Pins Used"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Total Pins"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Actions"),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,ft,2,1,"tbody",7),e.YNc(21,ht,4,0,"tbody",7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("exportOptions",!0)("newButton",!0)("newButtonName","New Board")("modalContent",n.modalComponent)("modalSize","lg")("dataArray",n.data)("colsArray",n.cols),e.xp6(5),e.Q6J("dtOptions",n.dtOptions),e.xp6(15),e.Q6J("ngIf",0!=(null==n.data?null:n.data.length)),e.xp6(1),e.Q6J("ngIf",0==(null==n.data?null:n.data.length)))},directives:[U.N,x.G,h.O5,h.sg,J.O],pipes:[h.OU],styles:[""]}),o})();var E=f(4330);const Zt=[{path:"config-pin-types",component:X},{path:"config-boards",component:_t},{path:"config-sensors",component:ze},{path:"config-actuators",component:ve}];let Ct=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[E.Bz.forChild(Zt)],E.Bz]}),o})(),Tt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.ez,x.T,O.E,Y.IJ,Ct]]}),o})()}}]);