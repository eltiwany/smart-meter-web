"use strict";(self.webpackChunkkonekted_iot_web=self.webpackChunkkonekted_iot_web||[]).push([[161],{9161:(je,q,l)=>{l.r(q),l.d(q,{LinkHardwaresModule:()=>ze});var Y=l(3771),Q=l(6631),y=l(8970),d=l(8583),m=l(4371),r=l(665),e=l(7716),b=l(3002),_=l(7896),f=l(5120),A=l(1721);function O(n,i){if(1&n&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(null==t.name||null==t.name.errors?null:t.name.errors.message)}}function B(n,i){if(1&n&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(null==t.interval||null==t.interval.errors?null:t.interval.errors.message)}}function L(n,i){if(1&n&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(null==t.threshold||null==t.threshold.errors?null:t.threshold.errors.message)}}function H(n,i){if(1&n&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(null==t.threshold_percentage||null==t.threshold_percentage.errors?null:t.threshold_percentage.errors.message)}}let D=(()=>{class n{constructor(t,o,a,s){this.dataIn=t,this.sensorsService=o,this.modal=a,this.loader=s,this.form=new r.cw({id:new r.NI(""),name:new r.NI(""),interval:new r.NI(""),threshold:new r.NI(""),threshold_percentage:new r.NI("")}),this.onSubmit=()=>{var c,C,T,p,u,g,w;const I={id:null===(c=this.id)||void 0===c?void 0:c.value,name:null===(C=this.name)||void 0===C?void 0:C.value,interval:null===(T=this.interval)||void 0===T?void 0:T.value,threshold:null===(p=this.threshold)||void 0===p?void 0:p.value,threshold_percentage:null===(u=this.threshold_percentage)||void 0===u?void 0:u.value};this.sensorsService.updateUserSensor(null===(w=null===(g=this.data)||void 0===g?void 0:g.sensor)||void 0===w?void 0:w.id,I).then(Me=>{Me.error||(this.modal.close(),this.loader.refresh())})}}get id(){return this.form.get("id")}get name(){return this.form.get("name")}get interval(){return this.form.get("interval")}get threshold(){return this.form.get("threshold")}get threshold_percentage(){return this.form.get("threshold_percentage")}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("id",new r.NI(this.data.sensor.id,[m.b.required])),this.form.setControl("name",new r.NI(this.data.sensor.user_defined_name,[m.b.required])),this.form.setControl("interval",new r.NI(this.data.sensor.interval,[m.b.required])),this.form.setControl("threshold",new r.NI(this.data.sensor.threshold,[m.b.required])),this.form.setControl("threshold_percentage",new r.NI(this.data.sensor.threshold_percentage,[m.b.required,m.b.isPercentage])),console.log(this.form))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.i),e.Y36(_.n),e.Y36(f.F),e.Y36(A.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-sensors"]],decls:24,vars:16,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["formControlName","name","type","text","id","floatingName","placeholder","Name",1,"form-control"],["for","floatingName"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","interval","type","number","id","floatingInterval","placeholder","Interval",1,"form-control"],["for","floatingInterval"],["formControlName","threshold","type","number","id","floatingThreshold","placeholder","Threshold",1,"form-control"],["for","floatingThreshold"],["formControlName","threshold_percentage","type","number","id","floatingThreshold_percentage","placeholder","Threshold Percentage",1,"form-control"],["for","floatingThreshold_percentage"],[1,"w-100","btn","btn-lg","btn-success",3,"type"],[1,"bi","bi-check-circle-fill"],[1,"text-danger","font-weight-bold","p-0","m-0"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(1,"div",1),e._UZ(2,"input",2),e.TgZ(3,"label",3),e._uU(4,"Name"),e.qZA(),e.YNc(5,O,2,1,"p",4),e.qZA(),e.TgZ(6,"div",1),e._UZ(7,"input",5),e.TgZ(8,"label",6),e._uU(9,"Interval"),e.qZA(),e.YNc(10,B,2,1,"p",4),e.qZA(),e.TgZ(11,"div",1),e._UZ(12,"input",7),e.TgZ(13,"label",8),e._uU(14,"Threshold"),e.qZA(),e.YNc(15,L,2,1,"p",4),e.qZA(),e.TgZ(16,"div",1),e._UZ(17,"input",9),e.TgZ(18,"label",10),e._uU(19,"Threshold Percentage"),e.qZA(),e.YNc(20,H,2,1,"p",4),e.qZA(),e.TgZ(21,"button",11),e._uU(22," Update "),e._UZ(23,"i",12),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(2),e.ekj("invalid",(null==o.name?null:o.name.touched)&&(null==o.name?null:o.name.invalid)),e.xp6(3),e.Q6J("ngIf",(null==o.name?null:o.name.touched)&&(null==o.name?null:o.name.invalid)),e.xp6(2),e.ekj("invalid",(null==o.interval?null:o.interval.touched)&&(null==o.interval?null:o.interval.invalid)),e.xp6(3),e.Q6J("ngIf",(null==o.interval?null:o.interval.touched)&&(null==o.interval?null:o.interval.invalid)),e.xp6(2),e.ekj("invalid",(null==o.threshold?null:o.threshold.touched)&&(null==o.threshold?null:o.threshold.invalid)),e.xp6(3),e.Q6J("ngIf",(null==o.threshold?null:o.threshold.touched)&&(null==o.threshold?null:o.threshold.invalid)),e.xp6(2),e.ekj("invalid",(null==o.threshold_percentage?null:o.threshold_percentage.touched)&&(null==o.threshold_percentage?null:o.threshold_percentage.invalid)),e.xp6(3),e.Q6J("ngIf",(null==o.threshold_percentage?null:o.threshold_percentage.touched)&&(null==o.threshold_percentage?null:o.threshold_percentage.invalid)),e.xp6(1),e.ekj("disabled",o.form.invalid),e.Q6J("type",o.form.valid?"submit":"button"))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,d.O5,r.wV],styles:[""]}),n})();var U=l(4249);let k=(()=>{class n{constructor(t,o,a,s){this.modal=t,this.sensorService=o,this.loader=a,this.dataIn=s,this.form=new r.cw({sensorId:new r.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("sensorId",new r.NI(this.data.sensor.id)))}get sensorId(){return this.form.get("sensorId")}onSubmit(){var t;this.sensorService.deleteUserSensor(null===(t=this.sensorId)||void 0===t?void 0:t.value).then(o=>{o.error||(this.modal.close(),this.loader.refresh())})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.F),e.Y36(_.n),e.Y36(A.D),e.Y36(b.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-sensors"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1," Unlink this sensor?"),e._UZ(2,"br"),e._UZ(3,"br"),e._uU(4," Your physical device will no longer be able to communicate with the system.\n"),e.qZA(),e.TgZ(5,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(6,"button",1),e._uU(7," Delete "),e._UZ(8,"i",2),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",o.form),e.xp6(1),e.ekj("disabled",o.form.invalid),e.Q6J("type",o.form.valid?"submit":"button"))},directives:[r._Y,r.JL,r.sg],styles:[""]}),n})();var h=l(14),v=l(474),Z=l(1321),x=l(4957);function F(n,i){1&n&&(e.TgZ(0,"span",22),e._uU(1,"AL"),e.qZA())}function E(n,i){if(1&n&&e._UZ(0,"i"),2&n){const t=e.oxw();e.Gre("bi bi-",t.iconName," card-icon2 p-3")}}function z(n,i){if(1&n&&e._UZ(0,"img",23),2&n){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}function M(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Status"),e.qZA(),e.TgZ(3,"td"),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.Tol((null!=t.data.board&&t.data.board.is_online?"bg-success":"bg-danger")+" badge mx-1"),e.xp6(1),e.hij(" ",null!=t.data.board&&t.data.board.is_online?"Online":"Offline"," ")}}function j(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td",29),e.TgZ(2,"span",33),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td",29),e._UZ(5,"i",34),e.qZA(),e.TgZ(6,"td",31),e.TgZ(7,"span",33),e._uU(8),e.qZA(),e.qZA(),e.qZA()),2&n){const t=i.$implicit;let o;e.xp6(3),e.Oqu(null!==(o=t.sensor_pin)&&void 0!==o?o:t.actuator_pin),e.xp6(5),e.Oqu(t.board_pin+t.board_pin_number)}}function P(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Connections"),e.qZA(),e.TgZ(3,"td"),e.TgZ(4,"table"),e.TgZ(5,"tr",28),e.TgZ(6,"th",29),e.TgZ(7,"small",30),e._uU(8,"S/A Pin"),e.qZA(),e.qZA(),e._UZ(9,"th",29),e.TgZ(10,"th",31),e.TgZ(11,"small",30),e._uU(12,"Board Pin"),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,j,9,2,"tr",32),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(13),e.Q6J("ngForOf",t.connections)}}function G(n,i){if(1&n&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.column," ")}}function V(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Expected data"),e.qZA(),e.TgZ(3,"td"),e.YNc(4,G,2,1,"span",35),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.columns)}}function $(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Token"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(t.token)}}function X(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Interval"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(t.interval)}}function R(n,i){if(1&n&&(e.TgZ(0,"div",1),e.TgZ(1,"div",24),e.TgZ(2,"p",25),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"table",26),e.YNc(5,M,6,3,"tr",27),e.YNc(6,P,14,1,"tr",27),e.YNc(7,V,5,1,"tr",27),e.YNc(8,$,5,1,"tr",27),e.YNc(9,X,5,1,"tr",27),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.deviceName),e.xp6(2),e.Q6J("ngIf",t.showStatus),e.xp6(1),e.Q6J("ngIf",0!=t.connections.length),e.xp6(1),e.Q6J("ngIf",0!=t.columns.length),e.xp6(1),e.Q6J("ngIf",t.token),e.xp6(1),e.Q6J("ngIf",t.interval)}}function W(n,i){if(1&n&&(e.TgZ(0,"div",37),e.TgZ(1,"p",30),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.linkMessage," ")}}function K(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),s=e.MAs(20);return a.modalService.open(s,a.modalSize)}),e._uU(1," View Device "),e.qZA()}if(2&n){const t=e.oxw();e.Gre("btn btn-",t.color,"")}}function ee(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),s=e.MAs(22);return a.modalService.open(s,a.modalDeleteSize)}),e._UZ(1,"i",40),e.qZA()}}function te(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),s=e.MAs(24);return a.modalService.open(s,a.modalEditSize)}),e._UZ(1,"i",42),e.qZA()}}function ne(n,i){1&n&&e.GkF(0)}function oe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",43),e.TgZ(1,"h2",44),e._uU(2),e.qZA(),e.TgZ(3,"button",45),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA(),e.qZA(),e.TgZ(4,"div",46),e.YNc(5,ne,1,0,"ng-container",47),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.heading),e.xp6(3),e.Q6J("ngComponentOutlet",t.modalContent)("ngComponentOutletInjector",t.dataInjected)}}function ie(n,i){1&n&&e.GkF(0)}function ae(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",48),e.TgZ(1,"h2",44),e._uU(2),e.qZA(),e.TgZ(3,"button",49),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e._UZ(4,"i",50),e.qZA(),e.qZA(),e.TgZ(5,"div",46),e.YNc(6,ie,1,0,"ng-container",47),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.headingDelete),e.xp6(4),e.Q6J("ngComponentOutlet",t.modalDeleteContent)("ngComponentOutletInjector",t.dataInjected)}}function re(n,i){1&n&&e.GkF(0)}function se(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",43),e.TgZ(1,"h2",44),e._uU(2),e.qZA(),e.TgZ(3,"button",49),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e._UZ(4,"i",50),e.qZA(),e.qZA(),e.TgZ(5,"div",46),e.YNc(6,re,1,0,"ng-container",47),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("Edit ",t.deviceName,""),e.xp6(4),e.Q6J("ngComponentOutlet",t.modalEditContent)("ngComponentOutletInjector",t.dataInjected)}}let S=(()=>{class n{constructor(t,o,a){this.config=t,this.injector=o,this.modalService=a,this.dataInjected={},this.heading="View Device",this.headingDelete="Delete Device",this.imageUrl=this.config.preferences.imageSelector,this.iconName="plus-circle-fill",this.color="tertiary",this.isImage=!1,this.showStatus=!0,this.textButton=!1,this.link=!0,this.linkMessage='Click the "plus" icon to link a device.',this.deviceName="Device Name",this.isActiveLow=!1,this.token="",this.interval="",this.connections=[],this.columns=[],this.modalSize="md",this.deleteAction=!1,this.modalDeleteSize="md",this.editAction=!1,this.modalEditSize="md",this.data=[]}ngOnInit(){this.dataInjected=this.createInjector(this.data)}createInjector(t){return e.zs3.create([{provide:b.i,useValue:t}],this.injector)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h._),e.Y36(e.zs3),e.Y36(f.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-hardware-list-card"]],inputs:{heading:"heading",headingDelete:"headingDelete",imageUrl:"imageUrl",iconName:"iconName",color:"color",isImage:"isImage",showStatus:"showStatus",textButton:"textButton",link:"link",linkMessage:"linkMessage",deviceName:"deviceName",isActiveLow:"isActiveLow",token:"token",interval:"interval",connections:"connections",columns:"columns",modalContent:"modalContent",modalSize:"modalSize",deleteAction:"deleteAction",modalDeleteContent:"modalDeleteContent",modalDeleteSize:"modalDeleteSize",editAction:"editAction",modalEditContent:"modalEditContent",modalEditSize:"modalEditSize",data:"data"},decls:25,vars:11,consts:[[1,"row","mb-3"],[1,"col-12"],[1,"card","border-0","shadow"],[1,"card-body","d-flex","justify-content-around","h-card-fixed"],[1,"row"],[1,"col-12","text-center","mb-3","align-items-center","justify-content-center","pointer",3,"click"],["class","badge bg-warning active-low",4,"ngIf"],[3,"class",4,"ngIf"],["height","185px",3,"src",4,"ngIf"],["class","col-12",4,"ngIf"],["class","col-12 card-link-device",4,"ngIf"],[1,"col-12","m-0","p-0"],[1,"row","m-0","p-0","mt-2"],[1,"col","col-md-8"],["placement","bottom","ngbTooltip","Edit",3,"class","click",4,"ngIf"],[1,"col","col-md-4"],["class","btn btn-danger float-right","placement","bottom","ngbTooltip","Delete",3,"click",4,"ngIf"],["class","btn btn-primary float-right","style","margin-right: 5px","placement","bottom","ngbTooltip","Edit",3,"click",4,"ngIf"],["class","p-0"],["modal",""],["modalDelete",""],["modalEdit",""],[1,"badge","bg-warning","active-low"],["height","185px",3,"src"],[1,"d-none","d-sm-block"],[1,"fw-extrabold","mb-2","text-center"],[1,"small","table","table-bordered","table-sm"],[4,"ngIf"],[1,"text-center"],[2,"padding","0 !important"],[1,"font-weight-750"],[2,"padding","0 !important","padding-left","3px !important"],[4,"ngFor","ngForOf"],[1,"badge","bg-dark"],[1,"bi","bi-arrow-right"],["class","badge bg-success mx-1",4,"ngFor","ngForOf"],[1,"badge","bg-success","mx-1"],[1,"col-12","card-link-device"],["placement","bottom","ngbTooltip","Edit",3,"click"],["placement","bottom","ngbTooltip","Delete",1,"btn","btn-danger","float-right",3,"click"],[1,"bi","bi-trash"],["placement","bottom","ngbTooltip","Edit",1,"btn","btn-primary","float-right",2,"margin-right","5px",3,"click"],[1,"bi","bi-pencil"],[1,"modal-header","bg-dark","text-white"],[1,"h6","modal-title"],["type","button",1,"btn-close","bg-white",3,"click"],[1,"modal-body"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[1,"modal-header","bg-danger","text-white"],["type","button",1,"btn","btn-link","border-0","text-white",3,"click"],[1,"bi","bi-x-lg"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.NdJ("click",function(){e.CHM(a);const c=e.MAs(20);return o.modalService.open(c,o.modalSize)}),e.TgZ(6,"div"),e.YNc(7,F,2,0,"span",6),e.YNc(8,E,1,3,"i",7),e.YNc(9,z,1,1,"img",8),e.qZA(),e.qZA(),e.YNc(10,R,10,6,"div",9),e.YNc(11,W,3,1,"div",10),e.TgZ(12,"div",11),e.TgZ(13,"div",12),e.TgZ(14,"div",13),e.YNc(15,K,2,3,"button",14),e.qZA(),e.TgZ(16,"div",15),e.YNc(17,ee,2,0,"button",16),e.YNc(18,te,2,0,"button",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,oe,6,3,"ng-template",18,19,e.W1O),e.YNc(21,ae,7,3,"ng-template",18,20,e.W1O),e.YNc(23,se,7,3,"ng-template",18,21,e.W1O)}2&t&&(e.xp6(6),e.Gre("icon-shape shadow icon-shape-",o.color," rounded"),e.xp6(1),e.Q6J("ngIf",o.isActiveLow),e.xp6(1),e.Q6J("ngIf",!o.isImage),e.xp6(1),e.Q6J("ngIf",o.isImage),e.xp6(1),e.Q6J("ngIf",!o.link),e.xp6(1),e.Q6J("ngIf",o.link),e.xp6(4),e.Q6J("ngIf",o.textButton),e.xp6(2),e.Q6J("ngIf",o.deleteAction),e.xp6(1),e.Q6J("ngIf",o.editAction))},directives:[d.O5,d.sg,d.$G],styles:[".active-low[_ngcontent-%COMP%]{position:absolute;top:35px;right:35px}"]}),n})();function le(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",5),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();let a;e.xp6(1),e.Q6J("imageUrl",o.api.storageHost+t.sensor.image_url)("isImage",!0)("link",!1)("textButton",!0)("showStatus",!1)("deleteAction",!0)("editAction",!0)("color","warning")("modalSize","lg")("modalEditContent",o.modalEditComponent)("modalContent",o.modalViewComponent)("modalDeleteContent",o.modalDeleteComponent)("deviceName",null!==(a=t.sensor.user_defined_name)&&void 0!==a?a:t.sensor.name)("interval",t.sensor.interval)("data",t)("connections",t.connections)("columns",t.columns)}}function de(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("modalSize","lg")("color","warning")("linkMessage","No appliance found, Data from new appliance will be displayed here.")("iconName","exclamation")("data",t.data)}}let ce=(()=>{class n{constructor(t,o,a,s){this.sensorsService=t,this.config=o,this.api=a,this.fn=s,this.data=[],this.modalEditComponent=D,this.modalViewComponent=U.k,this.modalDeleteComponent=k}ngOnInit(){this.getSensors()}getSensors(){this.sensorsService.getAutoAddedUserSensors().then(t=>{t.error||(this.data=t.data)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.n),e.Y36(h._),e.Y36(v.s),e.Y36(Z.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-auto-sensors"]],decls:4,vars:4,consts:[[3,"exportOptions","newButton"],[1,"row"],["class","col col-md-3",4,"ngFor","ngForOf"],["class","col col-md-3",4,"ngIf"],[1,"col","col-md-3"],["headingDelete","Unlink Sensor",3,"imageUrl","isImage","link","textButton","showStatus","deleteAction","editAction","color","modalSize","modalEditContent","modalContent","modalDeleteContent","deviceName","interval","data","connections","columns"],["heading","No sensor found.",3,"modalSize","color","linkMessage","iconName","data"]],template:function(t,o){1&t&&(e._UZ(0,"app-top-bar",0),e.TgZ(1,"div",1),e.YNc(2,le,2,17,"div",2),e.YNc(3,de,2,5,"div",3),e.qZA()),2&t&&(e.Q6J("exportOptions",!1)("newButton",!1),e.xp6(2),e.Q6J("ngForOf",o.data),e.xp6(1),e.Q6J("ngIf",0==o.data.length))},directives:[x.N,d.sg,d.O5,S],styles:[""]}),n})();var me=l(1326),pe=l(9672),ue=l(6284),ge=l(1716);function he(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",5),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();let a;e.xp6(1),e.Q6J("imageUrl",o.api.storageHost+t.actuator.image_url)("isImage",!0)("link",!1)("textButton",!0)("showStatus",!1)("deleteAction",!0)("color","success")("isActiveLow",t.actuator.is_active_low)("modalSize","lg")("modalContent",o.modalViewComponent)("modalDeleteContent",o.modalDeleteComponent)("deviceName",null!==(a=t.actuator.user_defined_name)&&void 0!==a?a:t.actuator.name)("interval",t.actuator.interval)("data",t)("connections",t.connections)("columns",t.columns)}}function _e(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("modalSize","lg")("color","success")("modalContent",t.modalComponent)("linkMessage","Click the plus icon to link another device.")("iconName","node-plus-fill")("data",t.data)}}function fe(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("modalSize","lg")("color","success")("modalContent",t.modalComponent)("linkMessage","Click the plus icon to link a device.")("iconName","plus-circle-fill")("data",t.data)}}let ve=(()=>{class n{constructor(t,o,a,s){this.actuatorsService=t,this.config=o,this.api=a,this.fn=s,this.data=[],this.modalComponent=ue.m,this.modalViewComponent=me.M,this.modalDeleteComponent=pe.d}ngOnInit(){this.getActuators()}getActuators(){this.actuatorsService.getUserActuators().then(t=>{t.error||(this.data=t.data)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ge.G),e.Y36(h._),e.Y36(v.s),e.Y36(Z.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-actuators"]],decls:5,vars:5,consts:[[3,"exportOptions","newButton"],[1,"row"],["class","col col-md-3",4,"ngFor","ngForOf"],["class","col col-md-3",4,"ngIf"],[1,"col","col-md-3"],["headingDelete","Unlink Actuator",3,"imageUrl","isImage","link","textButton","showStatus","deleteAction","color","isActiveLow","modalSize","modalContent","modalDeleteContent","deviceName","interval","data","connections","columns"],["heading","Link Another Actuator",3,"modalSize","color","modalContent","linkMessage","iconName","data"],["heading","Link Actuator",3,"modalSize","color","modalContent","linkMessage","iconName","data"]],template:function(t,o){1&t&&(e._UZ(0,"app-top-bar",0),e.TgZ(1,"div",1),e.YNc(2,he,2,16,"div",2),e.YNc(3,_e,2,6,"div",3),e.YNc(4,fe,2,6,"div",3),e.qZA()),2&t&&(e.Q6J("exportOptions",!1)("newButton",!1),e.xp6(2),e.Q6J("ngForOf",o.data),e.xp6(1),e.Q6J("ngIf",0!=o.data.length),e.xp6(1),e.Q6J("ngIf",0==o.data.length))},directives:[x.N,d.sg,d.O5,S],styles:[""]}),n})();var N=l(2695);function Ze(n,i){if(1&n&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.sensor.id),e.xp6(1),e.Oqu(t.sensor.name)}}function Ce(n,i){if(1&n&&(e.TgZ(0,"p",18),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.name||null==t.name.errors?null:t.name.errors.message)}}function Te(n,i){if(1&n&&(e.TgZ(0,"p",18),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.interval||null==t.interval.errors?null:t.interval.errors.message)}}function we(n,i){if(1&n&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.pin_type)}}function be(n,i){if(1&n&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.pin_type+t.pin_number)}}function Ae(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"div",3),e.TgZ(3,"select",21),e.YNc(4,we,2,2,"option",5),e.qZA(),e.TgZ(5,"label",22),e._uU(6,"Sensor Pin"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",20),e.TgZ(8,"div",3),e.TgZ(9,"select",23),e.NdJ("change",function(){const s=e.CHM(t).index;return e.oxw(2).changePin(s)}),e.YNc(10,be,2,2,"option",5),e.qZA(),e.TgZ(11,"label",24),e._uU(12,"Board Pin"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=i.index,o=e.oxw(2);e.xp6(3),e.Q6J("formControlName","floatingSensorPin"+t),e.xp6(1),e.Q6J("ngForOf",o.datum[0].pins),e.xp6(5),e.Q6J("formControlName","floatingBoardPin"+t),e.xp6(1),e.Q6J("ngForOf",o.activeBoard.pins)}}function xe(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"h6",9),e._uU(2,"Name"),e.qZA(),e.TgZ(3,"div",3),e._UZ(4,"input",10),e.TgZ(5,"label",11),e._uU(6,"Name"),e.qZA(),e.YNc(7,Ce,2,1,"p",12),e.qZA(),e.TgZ(8,"h6",9),e._uU(9,"Get data from this sensor after every ? (seconds)"),e.qZA(),e.TgZ(10,"div",3),e._UZ(11,"input",13),e.TgZ(12,"label",14),e._uU(13,"Interval"),e.qZA(),e.YNc(14,Te,2,1,"p",12),e.qZA(),e.TgZ(15,"h6",9),e._uU(16),e.qZA(),e.YNc(17,Ae,13,4,"div",15),e.TgZ(18,"button",16),e._uU(19," Link Sensor "),e._UZ(20,"i",17),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.ekj("invalid",(null==t.name?null:t.name.touched)&&(null==t.name?null:t.name.invalid)),e.xp6(3),e.Q6J("ngIf",(null==t.name?null:t.name.touched)&&(null==t.name?null:t.name.invalid)),e.xp6(4),e.ekj("invalid",(null==t.interval?null:t.interval.touched)&&(null==t.interval?null:t.interval.invalid)),e.xp6(3),e.Q6J("ngIf",(null==t.interval?null:t.interval.touched)&&(null==t.interval?null:t.interval.invalid)),e.xp6(2),e.AsE("Connect ",null==t.datum[0].sensor?null:t.datum[0].sensor.name," sensor with ",null==t.activeBoard.board?null:t.activeBoard.board.name," board"),e.xp6(1),e.Q6J("ngForOf",t.rows),e.xp6(1),e.ekj("disabled",!t.form.valid),e.Q6J("type",t.form.valid?"submit":"button")}}function Se(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",25),e.TgZ(2,"div",26),e.TgZ(3,"div",27),e._UZ(4,"img",28),e.qZA(),e.qZA(),e.TgZ(5,"div",29),e.TgZ(6,"div",30),e._UZ(7,"img",31),e.qZA(),e.qZA(),e.TgZ(8,"div",26),e.TgZ(9,"div",27),e._UZ(10,"img",28),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("src",t.api.storageHost+t.datum[0].sensor.image_url,e.LSH)("alt",t.datum[0].sensor.name),e.xp6(3),e.Q6J("src",t.config.preferences.imageConnect,e.LSH),e.xp6(3),e.Q6J("src",t.api.storageHost+t.activeBoard.board.image_url,e.LSH)("alt",t.activeBoard.board.name)}}function Ne(n,i){1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div",32),e._uU(2," Error: No board have been linked to your account! you can not link a sensor without a connection to a board. "),e.qZA(),e.qZA())}function Ie(n,i){1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div",33),e._uU(2," Select sensor to preview and link to your account, you will connect all sensor pins to a board. "),e.qZA(),e.qZA())}let qe=(()=>{class n{constructor(t,o,a,s,c,C,T){this.fn=t,this.sensorsService=o,this.boardsService=a,this.api=s,this.loader=c,this.modal=C,this.config=T,this.rows=[],this.connections=[],this.form=new r.cw({sensorId:new r.NI("",[m.b.required]),name:new r.NI("",[m.b.required]),interval:new r.NI("",[m.b.required])}),this.onSubmit=()=>{var p,u,g;const w={sensorId:null===(p=this.sensorId)||void 0===p?void 0:p.value,userBoardId:this.activeBoard.board.id,name:null===(u=this.name)||void 0===u?void 0:u.value,interval:null===(g=this.interval)||void 0===g?void 0:g.value,connections:this.connections};this.sensorsService.newUserSensor(w).then(I=>{I.error||(this.modal.close(),this.loader.refresh())})}}get sensorId(){return this.form.get("sensorId")}get name(){return this.form.get("name")}get interval(){return this.form.get("interval")}ngOnInit(){this.getSensors(),this.getActiveBoard(),console.log(this.datum)}addPin(t){const o=this.rows.length;this.form.setControl("floatingSensorPin"+o,new r.NI({value:this.datum[0].pins[t].id,disabled:!0})),this.form.setControl("floatingBoardPin"+o,new r.NI(this.activeBoard.pins[0].id)),this.connections.push({id:o,sensorPinId:this.datum[0].pins[t].id,boardPinId:this.activeBoard.pins[0].id}),this.rows.push(Math.random())}changePin(t){var o;let a=this.connections.filter(s=>s.id==t)[0];a.boardPinId=null===(o=this.form.get("floatingBoardPin"+t))||void 0===o?void 0:o.value,this.connections=this.connections.filter(s=>s.id!=t),this.connections.push(a)}getSensors(){this.sensorsService.getSensorsUnfiltered().then(t=>{t.error||(this.data=t.data)})}getActiveBoard(){this.boardsService.getUserBoards().then(t=>{t.error||(this.activeBoard=t.data[0])})}previewSensor(){this.rows=[],this.connections=[],this.datum=this.data.filter(t=>{var o;return t.sensor.id==(null===(o=this.sensorId)||void 0===o?void 0:o.value)}),1==this.datum.length&&this.activeBoard&&this.datum[0].pins.forEach((t,o)=>this.addPin(o))}filterPins(t,o){return t.filter(a=>a.pin_type==o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.d),e.Y36(_.n),e.Y36(N.E),e.Y36(v.s),e.Y36(A.D),e.Y36(f.F),e.Y36(h._))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-sensors"]],decls:12,vars:7,consts:[["autocomplete","off",1,"p-1",3,"formGroup","ngSubmit"],[1,"row"],[1,"col","col-12"],[1,"form-floating","mb-3"],["id","sensor","aria-placeholder","Sensor",1,"form-control",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],["for","sensor",1,"my-1","me-2"],[4,"ngIf"],[3,"value"],[1,"font-weight-750","m-0"],["formControlName","name","name","text","id","floatingname","placeholder","Name",1,"form-control"],["for","floatingname"],["class","text-danger font-weight-bold p-0 m-0",4,"ngIf"],["formControlName","interval","name","text","id","floatinginterval","placeholder","Interval",1,"form-control"],["for","floatinginterval"],["class","row clear-both",4,"ngFor","ngForOf"],[1,"w-100","btn","btn-primary",3,"type"],[1,"bi","bi-file-earmark-plus-fill"],[1,"text-danger","font-weight-bold","p-0","m-0"],[1,"row","clear-both"],[1,"col","col-md-6"],["id","sensorPin","aria-placeholder","Sensor Pin",1,"form-control",3,"formControlName"],["for","sensorPin",1,"my-1","me-2"],["id","boardPin","aria-placeholder","Board Pin",1,"form-control",3,"formControlName","change"],["for","boardPin",1,"my-1","me-2"],[1,"p-2","row"],[1,"col","col-md-5"],[1,"alert","content-center"],[3,"src","alt"],[1,"col","col-md-2"],[1,"alert","content-center","rotate-90"],[3,"src"],[1,"alert","alert-danger"],[1,"alert","alert-info"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"select",4),e.NdJ("change",function(){return o.previewSensor()}),e.YNc(5,Ze,2,2,"option",5),e.qZA(),e.TgZ(6,"label",6),e._uU(7,"Sensor"),e.qZA(),e.qZA(),e.YNc(8,xe,21,12,"ng-container",7),e.qZA(),e.qZA(),e.YNc(9,Se,11,5,"ng-container",7),e.qZA(),e.YNc(10,Ne,3,0,"div",7),e.YNc(11,Ie,3,0,"div",7)),2&t&&(e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("formControlName","sensorId"),e.xp6(1),e.Q6J("ngForOf",o.data),e.xp6(3),e.Q6J("ngIf",o.datum&&o.activeBoard),e.xp6(1),e.Q6J("ngIf",o.datum&&o.activeBoard),e.xp6(1),e.Q6J("ngIf",!o.activeBoard&&o.datum),e.xp6(1),e.Q6J("ngIf",!o.datum))},directives:[r._Y,r.JL,r.sg,r.EJ,r.JJ,r.u,d.sg,d.O5,r.YN,r.Kr,r.Fj],styles:[""]}),n})();function Ue(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",5),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();let a;e.xp6(1),e.Q6J("imageUrl",o.api.storageHost+t.sensor.image_url)("isImage",!0)("link",!1)("textButton",!0)("showStatus",!1)("deleteAction",!0)("color","warning")("modalSize","lg")("modalContent",o.modalViewComponent)("modalDeleteContent",o.modalDeleteComponent)("deviceName",null!==(a=t.sensor.user_defined_name)&&void 0!==a?a:t.sensor.name)("interval",t.sensor.interval)("data",t)("connections",t.connections)("columns",t.columns)}}function ke(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("modalSize","lg")("color","warning")("modalContent",t.modalComponent)("linkMessage","Click the plus icon to link another device.")("iconName","node-plus-fill")("data",t.data)}}function Je(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("modalSize","lg")("color","warning")("modalContent",t.modalComponent)("linkMessage","Click the plus icon to link a device.")("iconName","plus-circle-fill")("data",t.data)}}let Ye=(()=>{class n{constructor(t,o,a,s){this.sensorsService=t,this.config=o,this.api=a,this.fn=s,this.data=[],this.modalComponent=qe,this.modalViewComponent=U.k,this.modalDeleteComponent=k}ngOnInit(){this.getSensors()}getSensors(){this.sensorsService.getUserSensors().then(t=>{t.error||(this.data=t.data)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.n),e.Y36(h._),e.Y36(v.s),e.Y36(Z.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sensors"]],decls:5,vars:5,consts:[[3,"exportOptions","newButton"],[1,"row"],["class","col col-md-3",4,"ngFor","ngForOf"],["class","col col-md-3",4,"ngIf"],[1,"col","col-md-3"],["headingDelete","Unlink Sensor",3,"imageUrl","isImage","link","textButton","showStatus","deleteAction","color","modalSize","modalContent","modalDeleteContent","deviceName","interval","data","connections","columns"],["heading","Link Another Sensor",3,"modalSize","color","modalContent","linkMessage","iconName","data"],["heading","Link Sensor",3,"modalSize","color","modalContent","linkMessage","iconName","data"]],template:function(t,o){1&t&&(e._UZ(0,"app-top-bar",0),e.TgZ(1,"div",1),e.YNc(2,Ue,2,15,"div",2),e.YNc(3,ke,2,6,"div",3),e.YNc(4,Je,2,6,"div",3),e.qZA()),2&t&&(e.Q6J("exportOptions",!1)("newButton",!1),e.xp6(2),e.Q6J("ngForOf",o.data),e.xp6(1),e.Q6J("ngIf",0!=o.data.length),e.xp6(1),e.Q6J("ngIf",0==o.data.length))},directives:[x.N,d.sg,d.O5,S],styles:[""]}),n})();var Qe=l(2761),ye=l(1183);let Oe=(()=>{class n{constructor(t,o,a,s,c){this.modal=t,this.boardService=o,this.loader=a,this.dataIn=s,this.boardState=c,this.form=new r.cw({boardId:new r.NI("")})}ngOnInit(){this.dataIn&&(this.data=this.dataIn,this.form.setControl("boardId",new r.NI(this.data.board.id)))}get boardId(){return this.form.get("boardId")}onSubmit(){var t;this.boardService.deleteUserBoard(null===(t=this.boardId)||void 0===t?void 0:t.value).then(o=>{o.error||(this.modal.close(),this.boardState.getActiveBoard(),this.loader.refresh())})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.F),e.Y36(N.E),e.Y36(A.D),e.Y36(b.i),e.Y36(ye.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-boards"]],decls:9,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"w-100","btn","btn-lg","btn-danger",3,"type"],[1,"bi","bi-trash"]],template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1," Unlink this board?"),e._UZ(2,"br"),e._UZ(3,"br"),e._uU(4," Your physical device will no longer be able to communicate with the system.\n"),e.qZA(),e.TgZ(5,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(6,"button",1),e._uU(7," Delete "),e._UZ(8,"i",2),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",o.form),e.xp6(1),e.ekj("disabled",o.form.invalid),e.Q6J("type",o.form.valid?"submit":"button"))},directives:[r._Y,r.JL,r.sg],styles:[""]}),n})();var Be=l(7768);function Le(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",5),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.xp6(1),e.Q6J("imageUrl",o.api.storageHost+t.board.image_url)("isImage",!0)("link",!1)("textButton",!0)("deleteAction",!0)("color","info")("modalSize","lg")("modalContent",o.modalViewComponent)("modalDeleteContent",o.modalDeleteComponent)("deviceName",t.board.name)("token",t.board.token)("data",t)}}function He(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"app-hardware-list-card",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("modalSize","lg")("color","info")("modalContent",t.modalComponent)("linkMessage","Click the plus icon to link a device.")("iconName","plus-circle-fill")("data",t.data)}}let De=(()=>{class n{constructor(t,o,a,s){this.boardsService=t,this.config=o,this.api=a,this.fn=s,this.data=[],this.modalComponent=Be.V,this.modalViewComponent=Qe.Y,this.modalDeleteComponent=Oe}ngOnInit(){this.getBoards()}getBoards(){this.boardsService.getUserBoards().then(t=>{t.error||(this.data=t.data)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N.E),e.Y36(h._),e.Y36(v.s),e.Y36(Z.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-boards"]],decls:4,vars:4,consts:[[3,"exportOptions","newButton"],[1,"row"],["class","col col-md-3",4,"ngFor","ngForOf"],["class","col col-md-3",4,"ngIf"],[1,"col","col-md-3"],["headingDelete","Unlink Board",3,"imageUrl","isImage","link","textButton","deleteAction","color","modalSize","modalContent","modalDeleteContent","deviceName","token","data"],["heading","Link Board",3,"modalSize","color","modalContent","linkMessage","iconName","data"]],template:function(t,o){1&t&&(e._UZ(0,"app-top-bar",0),e.TgZ(1,"div",1),e.YNc(2,Le,2,12,"div",2),e.YNc(3,He,2,6,"div",3),e.qZA()),2&t&&(e.Q6J("exportOptions",!1)("newButton",!1),e.xp6(2),e.Q6J("ngForOf",o.data),e.xp6(1),e.Q6J("ngIf",0==o.data.length))},directives:[x.N,d.sg,d.O5,S],styles:[""]}),n})();var J=l(4330);const Fe=[{path:"boards",component:De},{path:"sensors",component:Ye},{path:"smart-appliances",component:ce},{path:"actuators",component:ve}];let Ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[J.Bz.forChild(Fe)],J.Bz]}),n})(),ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,Y.T,Q.E,y.IJ,Ee]]}),n})()}}]);