<app-top-bar
  [exportOptions]="true"
  ></app-top-bar>

<div class="card">
  <div class="table-responsive py-4" id="htmlData" #htmlData>
    <div class="dataTable-wrapper dataTable-loading no-footer fixed-columns">
      <table datatable [dtOptions]="dtOptions" class="table table-flush dataTable-table" id="htmlData">
        <thead class="thead-light">
        <tr>
          <th>Id</th>
          <th>Appliance Name</th>
          <th>Appliance Status</th>
          <th>Threshold</th>
          <th>Customer Name</th>
          <th>Email</th>
          <th>City</th>
          <th>Region</th>
          <th>District</th>
        </tr>
        </thead>
        <tbody *ngIf="data?.length != 0">
        <ng-container *ngFor="let datum of  data; let i = index">
          <tr>
            <td>{{ datum.sensor.id }}</td>
            <td>{{ datum.sensor.user_defined_name }}</td>
            <td>
              <span class="px-2 py-1 text-white rounded bg-success" *ngIf="datum.sensor.is_switched_on"><i class="bi bi-toggle-on"></i> ON </span>
              <span class="px-2 py-1 text-white rounded bg-danger" *ngIf="!datum.sensor.is_switched_on"><i class="bi bi-toggle-off"></i> OFF </span>
            </td>
            <td>
              <span class="px-2 py-1 text-white rounded bg-primary" *ngIf="datum.sensor.threshold"> {{ (datum.sensor.threshold) + ' +/- ' + (datum.sensor.threshold_percentage + '%') }} </span>
              <span class="px-2 py-1 text-white rounded bg-warning" *ngIf="!datum.sensor.threshold"> N/A </span>
            <td>{{ datum.sensor.full_name }}</td>
            <td>{{ datum.sensor.email }}</td>
            <td>{{ datum.sensor.city }}</td>
            <td>{{ datum.sensor.region }}</td>
            <td>{{ datum.sensor.district }}</td>
          </tr>
        </ng-container>
        <tbody *ngIf="data?.length == 0">
          <tr>
            <th colspan="3">No data found.</th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
